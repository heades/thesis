\section{Consistency of DIL}
\label{subsec:consistency_of_dil}

In this section we prove consistency of DIL with respect to Rauszer's
Kripke semantics\index{Kripke Semantics} for BINT logic.  All of the results in this section
have been formalized in the Agda proof assistant\footnote{Agda source
  code is available at
  \url{https://github.com/heades/DIL-consistency}}.  We begin by first
defining a Kripke frame.

\begin{definition}
  \label{def:kripke_frame}
  A \textbf{Kripke frame}\index{Kripke Frame} is a pair $(W, R)$ of a set of worlds $W$, and
  a preorder $R$ on $W$.  
\end{definition}
Then we extend the notion of a Kripke frame to include an evaluation for atomic
formulas resulting in a Kripke model.
\begin{definition}
  \label{def:kripke_model}
  A \textbf{Kripke model}\index{Kripke Model} is a tuple $(W, R, V)$, such that, $(W, R)$ is
  a Kripke frame, and $V$ is a binary monotone relation on $W$ and the
  set of atomic formulas of DIL.
\end{definition}
Now we can interpret formulas in a Kripke model as follows:
\begin{definition}
  \label{def:interpretation}
  The interpretation of the formulas of DIL in a Kripke model $(W, R, V)$
  is defined by recursion on the structure of the formula as follows:
  \begin{center}
    \begin{tabular}{lll}
      \begin{math}
        \begin{array}{rll}
          [[ [| < + > |] w]]   & = & [[True]]\\
          [[ [| < - > |] w]]   & = & [[False]]\\
          [[ [|a|] w]]         & = & [[V w a]]\\  
        \end{array}
      \end{math}
      &
      \begin{math}
        \begin{array}{rll}      
          [[ [| A /\+ B |] w]] & = & [[ [| A |] w]]  \land [[ [| B |] w]]\\    
          [[ [| A /\- B |] w]] & = & [[ [| A |] w]]  \lor [[ [| B |] w]]\\    
          [[ [| A ->+ B |] w]] & = & \forall w' \in W. [[R w w']] \to [[ [| A |] w']] \to [[ [| B |] w']]\\
          [[ [| A ->- B |] w]] & = & \exists w' \in W. [[R w' w]] \land \lnot [[ [| A |] w']] \land [[ [| B |] w']]\\
        \end{array}
      \end{math}
    \end{tabular}
  \end{center}
\end{definition}
The interpretation of formulas really highlights the fact that implication is dual to coimplication.  Monotonicity
holds for this interpretation.

\begin{lemma}[Monotonicity]\index{Monotonicity}
  \label{lemma:monotonicity}
  Suppose $(W, R, V)$ is a Kripke model, $[[A]]$ is some DIL formula, and $w,w' \in W$.
  Then $[[R w w']]$ and $[[ [| A |] w]]$ imply $[[ [| A |] w']]$.
\end{lemma}

At this point we must set up the mathematical machinery which allows
for the interpretation of sequents in a Kripke model.  This will
require the interpretation of graphs, and hence, nodes.  We interpret
nodes as worlds in the model using a function we call a node
interpreter.
\begin{definition}\index{Node Interpreter}
  \label{def:node_interpreter}
  Suppose $(W, R, V)$ is a Kripke model and $S$ is a set of nodes of
  an abstract Kripke model $[[Gr]]$.  Then a \textbf{node interpreter} on
  $S$ is a function from $S$ to $W$.
\end{definition}
Now using the node interpreter we can interpret edges as statements
about the reachability relation in the model.  Thus, the
interpretation of a graph is just the conjunction of the
interpretation of its edges.
\begin{definition}
  \label{def:graph_interp}
  Suppose $(W, R, V)$ is a Kripke model, $[[Gr]]$ is an abstract Kripke
  model, and $[[N]]$ is a node interpreter on the set of nodes of $[[Gr]]$.
  Then the interpretation of
  $[[Gr]]$ in the Kripke model is defined by recursion on the structure
  of the graph as follows:
  \[
  \begin{array}{lll}
    [[ [| . |] N ]]            & = & [[True]]\\
    [[ [| n1 <=+ n2, Gr |] N]] & = & [[R (N n1) (N n2)]] \land [[ [| Gr |] N]]\\
    [[ [| n1 <=- n2, Gr |] N]] & = & [[R (N n2) (N n1)]] \land [[ [| Gr |] N]]\\
  \end{array}
  \]
\end{definition}
Now we can prove that if a particular reachability judgment holds,
then the interpretation of the nodes are reachable in the model.
\begin{lemma}[Reachability Interpretation]
  \label{lemma:reachability_interpretation}
  Suppose $(W, R, V)$ is a Kripke model, and $[[ [| Gr |] N]]$ for some abstract Kripke graph $[[Gr]]$. Then
  \begin{itemize}
  \item[i.] if $[[Gr |- n1 <=+ n2]]$, then $[[R (N n1) (N n2)]]$, and
  \item[ii.] if $[[Gr |- n1 <=- n2]]$, then $[[R (N n2) (N n1)]]$.
  \end{itemize}
\end{lemma}

We now have everything we need to interpret abstract Kripke
models. The final ingredient to the interpretation of sequents is the
interpretation of contexts.  
\begin{definition}
  \label{def:pol_interp}
  If $F$ is some meta-logical formula, we define $p\, F$ as follows:
  \[
  \begin{array}{lll}
    [[+]]\, F = F & \text{ and } &
    [[-]]\, F = \lnot F.\\
  \end{array}
  \]
\end{definition}
\begin{definition}
  \label{def:ctx_interp}
  Suppose $(W, R, V)$ is a Kripke model, $[[G]]$ is a context, 
  and $[[N]]$ is a node interpreter on the set of nodes in $[[G]]$.
  The interpretation of
  $[[G]]$ in the Kripke model is defined by recursion on the structure
  of the context as follows:
  \[
  \begin{array}{lll}
    [[ [| . |] N ]]        & = & [[True]]\\
    [[ [| p A @ n, G |] N]] & = & [[ p [| A |] (N n) ]] \land [[ [| G |] N]]\\
  \end{array}
  \]
\end{definition}
Combining these interpretations results in the following
definition of validity.
\begin{definition}\index{Validity}
  \label{def:validity}
  Suppose $(W, R, V)$ is a Kripke model, $[[G]]$ is a context, 
  and $[[N]]$ is a node interpreter on the set of nodes in $[[G]]$.
  The interpretation of sequents is defined as follows:
  \[
  \begin{array}{lll}
    [[ [|Gr ; G |- p A @ n |] N ]] & = & \text{ if } [[ [| Gr |] N ]] \text{ and } [[ [| G |] N]], \text{ then } [[ p [| A |] (N n)]].
  \end{array}
  \]
\end{definition}
Notice that in the definition of validity the graph $[[Gr]]$ is
interpreted as a set of constraints imposed on the set of Kripke models, thus
reinforcing the fact that the graphs on sequents really are abstract
Kripke models.  Finally, using the previous definition of validity we
can prove soundness.
\begin{thm}[Soundness]\index{Soundness}
  \label{thm:consistency}
  Suppose $[[Gr ; G |-p A @ n]]$. 
  Then for any Kripke model $(W, R, V)$ and node interpreter $N$ on $|[[Gr]]|$, $[[ [|Gr ; G |- p A @ n |] N]]$.
\end{thm}
% subsection consistency (end)

\section{Completeness of DIL}
\label{sec:completeness}
In this section we prove that every derivable sequent in L can be
translated to a derivable sequent of DIL.  We will call a sequent in L
a L-sequent and a sequent in DIL a DIL-sequent. Throughout this
section we assume without loss of generality that all L-sequents have
non-empty right-hand sides.  That is, for every L-sequent, 
$<<G |- Gr D>>$, we assume that $<<D>> \not= <<.>>$.  We do not loose generality
because it is possible to prove that $<<G |- Gr .>>$ holds if and only
if $<<G |- Gr n : False>>$ for any node $<<n>>$ (proof omitted).

Along the way, we will see admissibility of the analogues of the rules
we mentioned in Section~\ref{sec:dualized_intuitionistic_logic_(dil)}.
The proof of consistency was with respect to DIL including the cut
rule, but we prove completeness with respect to DIL where the general
cut rule has been replaced with the following two inference rules,
which can be seen as restricted instances of the cut rule:
\begin{center}
  \footnotesize
  \begin{math}
    \begin{array}{c}
      \dttdruleaxCut{} \\
      \\
      \dttdruleaxCutBar{}
    \end{array}
  \end{math}
\end{center}
  These two rules are required for the crucial left-to-right lemma.
  This lemma depends on the following admissible rule:
  \begin{lemma}[Weakening]
    \label{lemma:weakening}
    If $[[Gr ; G |- p B @ n]]$ is derivable, then $[[Gr ; G, p1 A @ n1 |- p2 B @
    n1]]$ is derivable.
  \end{lemma}
    \begin{proof}
      This holds by straightforward induction on the assumed typing
      derivation.    
    \end{proof}
Note that we will use admissible rules as if they are inference rules
of the logic throughout the sequel.
\begin{lemma}[Left-to-Right]\index{Left-to-Right}
  \label{lemma:refocus}
  If $[[Gr ; G1 , bar p A @ n , G2 |- bar p' B @ n']]$ is derivable, then \\
  so is $[[Gr ; G1 , G2 , p' B @ n' |- p A @ n]]$.  
\end{lemma}
  \begin{proof}
  Suppose $[[Gr ; G1 , bar p A @ n , G2 |- bar p' B @ n']]$ is derivable and
  $[[G3]] =^{\text{def}} [[G1 , bar p A @ n , G2]]$.  Then we derive 
  $[[Gr ; G1 , G2 , p' B @ n' |- p A @ n]]$ as follows:
  \begin{center}
    \footnotesize
    \begin{math}
      $$\mprset{flushleft}
      \inferrule* [right=\footnotesize axCut] {
        [[p' B @ n' in (G3, p' B @ n')]]
        \\
        $$\mprset{flushleft}
        \inferrule* [right=\footnotesize Weakening] {
          [[Gr ; G3 |- bar p' B @ n']]
        }{[[Gr ; G3, p' B @ n' |- bar p' B @ n']]}
      }{[[Gr ; G1 , G2 , p' B @ n' |- p A @ n]]}
    \end{math}
  \end{center}
  Thus, we obtain our result.
\end{proof}
We mentioned DIL avoids analogs of a number of rules from L.  To be
able to translate every derivable sequent of L to DIL, we must show
admissibility of those rules in DIL.
%% Derived rules.
\begin{lemma}[Reflexivity]
  \label{lemma:reflexivity}
  If $[[Gr, m <=p' m ; G |- p A @ n]]$ is derivable, then so is $[[Gr ; G |- p A @ n]]$.
\end{lemma}
  \begin{proof}
    This holds by a straightforward induction on the form of the assumed derivation.
  \end{proof}

\begin{lemma}[Transitivity]
  \label{lemma:transitivity}
  If $[[Gr, n1 <=p' n3 ; G |- p A @ n]]$ is derivable, $[[n1 <=p' n2 in Gr]]$ and $[[n2 <=p' n3 in Gr]]$, 
  then $[[Gr ; G |- p A @ n]]$ is derivable.
\end{lemma}
  \begin{proof}
    This holds by a straightforward induction on the form of the assumed derivation.
  \end{proof}

\begin{lemma}[AndL]
  \label{lemma:andl}
  If $[[Gr ; G, bar p A @ n |- p B @ n]]$ is derivable, then 
  $[[Gr ; G |- p (A /\bar p B) @ n]]$ is derivable.
\end{lemma}
\begin{proof}
  Suppose $[[Gr ; G, bar p A @ n |- p B @ n]]$ is derivable. By weakening
  we know $[[Gr ; G,bar p (A /\bar p B)@n, bar p B @ n, bar p A @ n |- p B @ n]]$. 
  Then $[[Gr ; G |- p (A /\bar p B) @ n]]$ is derivable as follows:
  \begin{center}
    \small
    \begin{math}
      $$\mprset{flushleft}
      \inferrule* [right=\scriptsize Cut] {
        $$\mprset{flushleft}
        \inferrule* [right=\scriptsize AndBar] {
          $$\mprset{flushleft}
          \inferrule* [right=\scriptsize Cut] {
            D_1
            \\
            D_2
          }{[[Gr ; G, bar p (A /\bar p B)@n |- p B @ n]]}
        }{[[Gr ; G, bar p (A /\bar p B)@n |- p (A /\bar p B) @ n]]}
        \\
        $$\mprset{flushleft}
        \inferrule* [right=ax] {
          \,
        }{[[Gr ; G, bar p (A /\bar p B)@n |- bar p (A /\bar p B) @ n]]}
      }{[[Gr ; G |- p (A /\bar p B) @ n]]}
    \end{math}
  \end{center}
  where we have the following subderivations:  

  \begin{math}
      \small
      \begin{array}{lll}
        D_0: \\
        & $$\mprset{flushleft}
              \inferrule* [right=\scriptsize AndBar] {
                $$\mprset{flushleft}
                \inferrule* [right=\scriptsize ax] {
                  \,
                }{[[Gr ; G, bar p (A /\bar p B)@n, bar p B @ n, p A @ n |- p A@n]]}
              }{[[Gr ; G, bar p (A /\bar p B)@n, bar p B @ n, p A @ n |- p (A /\bar p B)@n]]}
      \end{array}
    \end{math}
    
    \begin{math}
      \small
      \begin{array}{lll}
        D_1: \\
        &
        $$\mprset{flushleft}
      \inferrule* [right=\scriptsize Cut] {              
        [[Gr ; G,bar p (A /\bar p B)@n, bar p B @ n, bar p A @ n |- p B @ n]]
        \\
        $$\mprset{flushleft}
        \inferrule* [right=\scriptsize ax] {
          \,
        }{[[Gr ; G, bar p (A /\bar p B)@n, bar p B @ n, bar p A @ n |- bar p B @ n]]}
      }{[[Gr ; G, bar p (A /\bar p B)@n, bar p B @ n |- p A @ n]]}
      \end{array}
    \end{math}
      
    \begin{math}
      \small
      \begin{array}{lll}
        D_2: \\
      & $$\mprset{flushleft}
            \inferrule* [right=\scriptsize Cut] {
              $$\mprset{flushleft}
              \inferrule* [right=\scriptsize ax] {
                \,
              }{[[Gr ; G, bar p (A /\bar p B)@n, bar p B @ n, p A @ n |- bar p (A /\bar p B)@n]]}
              \\
              D_0
            }{[[Gr ; G, bar p (A /\bar p B)@n, bar p B @ n |- bar p A @ n]]}
      \end{array}
    \end{math}
\end{proof}

\begin{lemma}[MonoL]
  \label{lemma:monol}
  If $[[Gr ; G , p A @ n1 , p A @ n2,G' |- p' B @ n']]$ is derivable and $[[n1 <=p n2 in Gr]]$, then
  $[[Gr ; G , p A @ n1,G' |- p' B @ n']]$ is derivable.
\end{lemma}
\begin{proof}
  This result easily follows by part one of Corollary~\ref{coro:mono}, and contraction (Lemma~\ref{lemma:contract}).
\end{proof}

\begin{lemma}[MonoR]
  \label{lemma:monor}
  If $[[Gr ; G, bar p A @ n1, G' |- p A @ n2]]$ and $[[n1 <= p n2]] \in [[Gr]]$, then 
  $[[Gr ; G, G' |- p A @ n2]]$ is derivable.
\end{lemma}
  \begin{proof}
    Suppose $[[Gr ; G, bar p A @ n1, G' |- p A @ n2]]$ and $[[n1 <= p n2]] \in [[Gr]]$.
    Then by part one of monotonicity (Corollary~\ref{coro:mono}) we know 
    $[[Gr ; G, bar p A @ n2, G' |- p A @ n2]]$.  Finally, we know by the 
    axiom cut rule that $[[Gr ; G, G' |- p A @ n2]]$.    
  \end{proof}

\begin{lemma}[Exchange]
  \label{lemma:exchange}
  If $[[Gr ; G |- p A @ n]]$ is derivable and $[[Perm]]$ is a permutation of $[[G]]$, then
  $[[Gr ; Perm G |- p A @ n]]$ is derivable.
\end{lemma}
  \begin{proof}
    This holds by a straightforward induction on the form of the assumed derivation.
  \end{proof}
\noindent
Note that we often leave the application of exchange implicit for
readablity.  Finally, we have the admissible for contraction.

\begin{lemma}[Contraction]
  \label{lemma:contract}
  If $[[Gr ; G , p A @ n , p A @ n , G' |- p' B @ n']]$, then
  $[[Gr ; G , p A @ n , G' |- p' B @ n']]$.
\end{lemma}
\begin{proof}
  This holds by a straightforward induction on the form of the assumed derivation.
\end{proof}

The proofs of the previous admissible rules depend on a general
monotonicity result (Lemma~\ref{lemma:genmono}) for DIL.  The proof of
this will require some auxiliary mathematical machinery. First, we
show that arbitrary edges can be weakened into the reachability
judgment.
\begin{lemma}[Graph Weakening]
  \label{lemma:graph_weakening}
  If $[[Gr |- n1 <= p * n2]]$, then $[[Gr, n3 <= p' n4 |- n1 <= p * n2]]$.
\end{lemma}
\begin{proof}
  This holds by a straightforward induction on the form of the assumed derivation.
\end{proof}
Now monotonicity is the notion of truths holding forever into the
future, and falsehood holding forever into the past.  That is, if a
formula is true in some current world, then it must remain true, and
if a forumla is false in the current world, then it remains false
forever into the past.  Thus, a false formula may eventually become true
in the future, but a true formula cannot be true now and then become
false in the future.  To capture this notion syntactically we require
the definition of a function which will push edges forward in the
abstract Kripke model -- the graph on the sequent.   This function is
ultimately used to construct the reachability constraint on
implication in the general monotonicity lemma.
\begin{definition}
  \label{def:raise}
  We define the function $[[raise]]$ on abstract graphs as follows:
  \begin{center}
    \small
    \begin{math}
      \begin{array}{lll}
        [[raise ( n1 , n2 , . )]] & = & [[.]]\\
        [[raise ( n1 , n2 , (n1 <=p  m, Gr))]] & = & [[n2 <=p m , raise (n1 , n2, Gr)]]\\
        [[raise ( n1 , n2 , ( m <=p n1, Gr))]] & = & [[m <= p n2 , raise (n1 , n2, Gr)]]\\
        [[raise ( n1 , n2 , (m <=p m' , Gr ))]] & = & [[m <=  p m' , raise (n1 , n2, Gr)]], 
        \text{where } [[m]] \not\equiv [[n1]] \text{ and } [[m']] \not\equiv [[n1]].\\
        [[raise ( n1 , n2 , (m <=bar p m' , Gr ))]] & = &[[m <=  bar p m' , raise (n1 , n2, Gr)]],
        \text{where } [[m]] \not\equiv [[n1]] \text{ and } [[m']] \not\equiv [[n1]].\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}
The following asserts that the orientation of an edge can be flipped,
as long as the polarity is flipped. 
\begin{lemma}[RelAssumFlip]
  \label{lemma:relassumflip}
  If $[[Gr1 , n1 <=p n2, Gr2 |- m <=p' m']]$, then $[[Gr1 , n2 <=bar p n1, Gr2 |- m <=p' m']]$.
\end{lemma}
  \begin{proof}
    This is a proof by induction on the form of the assumed
    derivation.  We only consider the case of the $\ifrName{ax}$ rule,
    because the remainder of the cases hold either trivially or by
    simple applicaitons of the induction hypothesis followed by the
    rule in the corresponding case.

    
    \begin{itemize}
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{ax}] {
            \ 
          }{[[Gr , n <= p'' n' , Gr' |- n <= p'' * n']]}
        \end{math}
      \end{center}
      We only consider the non-trivial case when $[[Gr , n <= p'' n' , Gr']] \equiv [[Gr1 , n1 <=p n2, Gr2]]$.
      This implies that $[[n]] \equiv [[m]] \equiv [[n1]]$, $[[n']] \equiv [[m']] \equiv [[n2]]$, and 
      $[[p'']] \equiv [[p']] \equiv [[p]]$.  
      It suffices to show $[[Gr1 , n2 <=bar p n1, Gr2 |- n1 <= p * n2]]$.  Clearly, we know by the $\ifrName{rel\_ax}$
      rule, $[[Gr1 , n2 <=bar p n1, Gr2 |- n2 <=bar p * n1]]$, and then by the $\ifrName{rel\_flip}$ rule we know
      $[[Gr1 , n2 <=bar p n1, Gr2 |- n1 <=p * n2]]$.    
    \end{itemize}
  \end{proof}
Using the $[[raise]]$ function we can show that all nodes related to
some node $[[n1]]$ which is related to a node $[[n2]]$ in some
subgraph $[[Gr1]]$, are also related to $[[n2]]$.  Now using the
following result we will be able to raise the lowerbound on edges in
a DIL-sequent, which will then be used to construct the reachability
requirements for implication in the general monotonicity lemma
(Lemma~\ref{lemma:genmono}).
\begin{lemma}[Raising the Lower Bound]
  \label{lemma:raise_lower}
  If $[[Gr |- n1 <=p* n2]]$ and $[[Gr, Gr1 |- m <=p' * m']]$, then $[[Gr, raise(n1,n2,Gr1) |- m <=p' * m']]$.
\end{lemma}
  \begin{proof}
    This is a proof by induction on the form of $[[Gr, Gr1 |- m <=p' * m']]$.
    \begin{itemize}
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{ax}] {
            \ 
          }{[[Gr' , m <= p' m' , Gr'' |- m <= p' * m']]}
        \end{math}
      \end{center}
      Note that it is the case that $[[Gr' , m <= p' m' , Gr'']] \equiv [[Gr,Gr1]]$.  If $[[m <=p' m']] \in [[Gr]]$,
      then we obtain our result, so suppose $[[m <=p' m']] \in [[Gr1]]$.  Suppose $[[p]] \equiv [[p']]$. 
      Now if $[[m]] \not\equiv [[n1]]$, then clearly, we obtain
      our result.  Consider the case where $[[m]] \equiv [[n1]]$.  Then it suffices to show
      $[[Gr,raise(n1,n2,Gr1') , n2 <= p m' , raise(n1,n2,Gr1'') |- n1 <= p * m']]$ where $[[Gr1]] \equiv [[Gr1',n1 <=p m',Gr1'']]$. 
      This holds by the following derivation:
      \begin{center}
        \small
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{rel\_trans}] {
            [[Gr |- n1 <=p* n2]]
            \\
              $$\mprset{flushleft}
            \inferrule* [right=\ifrName{rel\_ax}] {
              \ 
            }{[[Gr,raise(n1,n2,Gr1') , n2 <= p m' , raise(n1,n2,Gr1'') |- n2 <=p * m']]}
          }{[[Gr,raise(n1,n2,Gr1') , n2 <= p m' , raise(n1,n2,Gr1'') |- n1 <= p * m']]}
        \end{math}
      \end{center}      
      Now suppose $[[p']] \equiv [[bar p]]$.  if $[[m']] \not\equiv [[n1]]$, then clearly, we obtain
      our result.  Consider the case where $[[m']] \equiv [[n1]]$.  Then it suffices to show
      $[[Gr,raise(n1,n2,Gr1') , m <= bar p n2 , raise(n1,n2,Gr1'') |- m <= bar p * n1]]$ 
      where $[[Gr1]] \equiv [[Gr1', m <=bar p n1,Gr1'']]$. This holds by the following derivation:
      \begin{center}
        \scriptsize
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\scriptsize \ifrName{rel\_trans}] {                       
              $$\mprset{flushleft}
            \inferrule* [right=\scriptsize \ifrName{rel\_ax}] {
              \ 
            }{[[Gr,raise(n1,n2,Gr1') , m <= bar p n2 , raise(n1,n2,Gr1'') |- m <=bar p * n2]]}
            \\
            $$\mprset{flushleft}
            \inferrule* [right=\scriptsize \ifrName{rel\_flip}] {
              [[Gr |- n1 <=p* n2]]
            }{[[Gr |- n2 <=bar p* n1]]}
          }{[[Gr,raise(n1,n2,Gr1') , m <= bar p n2 , raise(n1,n2,Gr1'') |- m <= bar p * n1]]}
        \end{math}
      \end{center}      
      
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{refl}] {
            \ 
          }{[[Gr,Gr1 |- m <= p' * m]]}
        \end{math}
      \end{center}
      Note that in this case $[[m']] \equiv [[m]]$.  Our result follows from simply
      an application of the $\ifrName{rel\_refl}$ rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{rel\_trans}] {
            [[Gr,Gr1 |- m <= p' * m'' &&  Gr,Gr1 |- m'' <= p' * m']]
          }{[[Gr,Gr1 |- m <= p' * m']]}
        \end{math}
      \end{center}
      This case holds by two applications of the induction hypothesis followed by
      applying the $\ifrName{rel\_trans}$ rule.
      
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{flip}] {
            [[Gr,Gr1 |- m' <= bar p' * m]]
          }{[[Gr,Gr1 |- m <= p' * m']]}
        \end{math}
      \end{center}
      It suffices to show $[[Gr,raise(n1,n2,Gr) |- m <= p' * m']]$.  We know $[[Gr |- n1 <=p* n2]]$, so by 
      the induction hypothesis we know $[[Gr,raise(n2,n1,Gr) |- m' <= bar p * m]]$.  So it suffices to show that 
      $[[Gr,raise(n2,n1,Gr) |- m' <= bar p' * m]]$ implies
      $[[Gr,raise(n1,n2,Gr) |- m <= p' * m']]$, but this easily follows by repeated applications of Lemma~\ref{lemma:relassumflip}.
    \end{itemize}
  \end{proof}
\noindent
We can now use the previous result to raise the lower bound on sequents.
\begin{lemma}[Graph Node Containment]
  \label{lemma:graph_node_containment}
  If $[[Gr |- n1 <=p * n2]]$ and $[[n1]]$ and $[[n2]]$ are unique, then
  $[[n1]],[[n2]] \in [[| Gr |]]$.
\end{lemma}
\begin{proof}
  This holds by straightforward induction on the form of $[[Gr |- n1 <=p * n2]]$.
\end{proof}

\begin{lemma}[Raising the Lower Bound Logically]
  \label{lemma:raising_the_lower_bound_logically}
  If $[[Gr,Gr1,Gr' ; G |- p A @ n]]$ and $[[Gr,Gr' |- n1 <=p * n2]]$, then
  $[[Gr,raise(n1,n2,Gr1),Gr' ; G |- p A @ n]]$.
\end{lemma}
  \begin{proof}
    This is a proof by induction on the form of $[[Gr,Gr1,Gr' ; G |- p A @ n]]$.  We assume with out loss of generality that
    $[[n1 in | Gr1 |]]$, and that $[[n1]] \not\equiv [[n2]]$.  
    If this is not the case then $[[raise(n1,n2,Gr1)]] = [[Gr1]]$, and the result holds trivially.
    
    \begin{itemize}
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{ax}] {
            [[Gr,Gr1,Gr' |- n' <= p * n]]
          }{[[Gr,Gr1,Gr' ; G , p A @ n' |- p A @ n]]}
        \end{math}
      \end{center}
      Clearly, if $[[Gr,Gr1,Gr' |- n' <= p * n]]$, then $[[Gr,Gr',Gr1 |- n' <= p * n]]$.
      Thus, this case follows by raising the lower bound (Lemma~\ref{lemma:raise_lower}), and applying
      the $\ifrName{ax}$ rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{unit}] {
            \ 
          }{[[Gr,Gr1,Gr' ; G |- p < p > @ n]]}
        \end{math}
      \end{center}
      Trivial.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{and}] {
            [[Gr,Gr1,Gr' ; G |- p A1 @ n && Gr,Gr1,Gr' ; G |- p A2 @ n]]
          }{[[Gr,Gr1,Gr' ; G |- p (A1 /\p A2) @ n]]}
        \end{math}
      \end{center}
      This case holds by two applications of the induction hypothesis, and then applying
      the $\ifrName{and}$ rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{andBar}] {
            [[Gr,Gr1,Gr' ; G |- p A ! d @ n]]
          }{[[Gr,Gr1,Gr' ; G |- p (A1 /\ bar p A2) @ n]]}
        \end{math}
      \end{center}
      Similar to the previous case.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{imp}] {
            [[n' notin | Gr,Gr1,Gr' |, | G | ]]
            \\\\
            [[(Gr,Gr1,Gr', n <= p n') ; G , p A1 @ n' |- p A2 @ n']]
          }{[[Gr,Gr1,Gr' ; G |- p (A1 ->p A2) @ n]]}
        \end{math}
      \end{center}
      Since we know $[[n1]] \not\equiv [[n2]]$, then by Lemma~\ref{lemma:graph_node_containment} we know\\
      $[[n1]],[[n2]] \in [[| Gr,Gr' |]]$. Thus, $[[n']] \not\equiv [[n1]] \not\equiv [[n2]]$.  Now by the
      induction hypothesis we know $[[(Gr,raise(n1,n2,Gr1),Gr', n <= p n') ; G , p A1 @ n' |- p A2 @ n']]$.
      This case then follows by the application of the $\ifrName{imp}$ rule to the former.


    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{impBar}] {
            [[Gr,Gr1,Gr' |- n <= bar p * n']]
            \\\\
                [[Gr,Gr1,Gr' ; G |- bar p A1 @ n']]  
                \\
                [[Gr,Gr1,Gr' ; G |- p A2 @ n']]
          }{[[Gr,Gr1,Gr' ; G |- p (A1 -> bar p A2) @ n]]}
        \end{math}
      \end{center}
      Clearly, $[[Gr,Gr1,Gr' |- n <= bar p * n']]$ implies $[[Gr,Gr',Gr1 |- n <= bar p * n']]$, and
      by raising the lower bound (Lemma~\ref{lemma:raise_lower}) we know $[[Gr,Gr',raise(n1,n2,Gr1) |- n <= bar p * n']]$
      which implies $[[Gr,raise(n1,n2,Gr1),Gr' |- n <= bar p * n']]$.


    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{axCut}] {
            [[p T' @ n' in G && Gr,Gr1,Gr' ; G, bar p T @ n |- bar p T' @ n']]
          }{[[Gr,Gr1,Gr'; G |- p T @ n]]}
        \end{math}
      \end{center}
      This case follows by a simple application of the induction hypothesis, and then reapplying
      the rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{axCutBar}] {
            [[bar p T' @ n' in G && Gr,Gr1,Gr' ; G , bar p T @ n |- p T' @ n']]
          }{[[Gr,Gr1,Gr'; G |- p T @ n]]}
        \end{math}
      \end{center}
      Similar to the previous case.
    \end{itemize}
  \end{proof}
Finally, we have everything we need to prove that general
monotonicity is admissible in DIL.  This implies the usual
admissible monotonicity rule as a corollary.
\begin{lemma}[General Monotonicity]\index{General Monotonicity}
  \label{lemma:genmono}
  If $[[Gr |- n1 <= p1 * n'1]]$, \ldots, $[[Gr |- ni <= pi * n'i]]$, $[[Gr |- m <= p * m']]$, and
  $[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B @ m]]$, then \\
  $[[Gr ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i |- p B @ m']]$.
\end{lemma}
\begin{proof}
    This is a proof by induction on the form of $[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B @ m]]$.
    We assume without loss of generality that all of $[[n1]], [[n'1]] \ldots , [[ni]], [[n'i]]$ are unique.  Thus, they
    are all member of $[[|Gr|]]$.
    
    \begin{itemize}
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{ax}] {
            [[Gr |- ni <= bar pi * n']]
          }{[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- bar pi Ai @ n']]}
        \end{math}
      \end{center}
      It must be the case that $[[p B @ m]] \equiv [[bar pi A @ n']]$.      
      In addition we know $[[Gr |- ni <= pi * n'i]]$ and $[[Gr |- n' <= bar pi * m']]$.  It suffices to show 
      $[[Gr ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i |- bar pi Ai @ m']]$.  This is derivable as follows:
      \begin{center}
        \footnotesize
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\footnotesize\ifrName{ax}] {
            $$\mprset{flushleft}
            \inferrule* [right=\footnotesize\ifrName{rel\_trans}] {
              $$\mprset{flushleft}
              \inferrule* [right=\footnotesize\ifrName{rel\_flip}] {
                [[Gr |- ni <= pi * n'i]]
              }{[[Gr |- n'i <= bar pi * ni]]}
              \\
              $$\mprset{flushleft}
              \inferrule* [right=\footnotesize\ifrName{rel\_trans}] {
                [[Gr |- ni <= bar pi * n']]
                \\\\
                [[Gr |- n' <= bar pi * m']]
              }{[[Gr |- ni <= bar pi * m']]}
            }{[[Gr |- n'i <= bar pi * m']]}
          }{[[Gr ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i |- bar pi Ai @ m']]}
        \end{math}
      \end{center}
      
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{unit}] {
            \ 
          }{[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p < p > @ m1]]}
        \end{math}
      \end{center}
      Trivial.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{and}] {
            [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B1 @ m]] 
            \\\\
            [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B2 @ m]]
          }{[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p (B1 /\p B2) @ m]]}
        \end{math}
      \end{center}
      This case follows easily by applying the induction hypothesis to each premise and then
      applying the $\ifrName{and}$ rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{andBar}] {
            [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B ! d @ m]]
          }{[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p (B1 /\ bar p B2) @ m]]}
        \end{math}
      \end{center}
      This case follows easily by the induction hypothesis and then applying $\ifrName{andBar}$.      

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{imp}] {
            [[n' notin | Gr |, | bar p1 A1 @ n1 , ... , bar pi Ai @ ni | ]]
            \\\\
            [[(Gr, m1 <= p n') ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni, p B1 @ n' |- p B2 @ n']]
          }{[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p (B1 ->p B2) @ m]]}
        \end{math}
      \end{center}
      
      We know by assumption $[[Gr |- n1 <= p1 * n'1]]$, \ldots, $[[Gr |- ni <= pi * n'i]]$, and by graph weakening 
      (Lemma~\ref{lemma:graph_weakening})
      $[[Gr, m <= p n' |- n1 <= p1 * n'1]]$, \ldots, $[[Gr, m <= p n' |- ni <= pi * n'i]]$.  We also know by
      applying the $\ifrName{rel\_refl}$ rule that $[[Gr, m <=p n' |- n' <= bar p * n']]$ and 
      $[[Gr, m <=p n' |- n' <= p * n']]$.  
      Thus, by the induction hypothesis we know 
      $[[(Gr, m <= p n') ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i, p B1 @ n' |- p B2 @ n']]$.
      Now we can raise the lower bound logically (Lemma~\ref{lemma:raising_the_lower_bound_logically}) with 
      $[[Gr1]] \equiv [[m <=p n']]$ and the assumption $[[Gr |- m <=p * m']]$ to obtain \\
      $[[(Gr, raise(m, m', m <= p n')) ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i, p B1 @ n' |- p B2 @ n']]$, but this is
      equivalent to $[[(Gr, m <= p n') ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i, p B1 @ n' |- p B2 @ n']]$.  
      Finally, using the former, we obtain our result by applying the $\ifrName{imp}$ rule.


    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{impBar}] {
            [[Gr |- m <= bar p * n']]
            \\\\
                [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- bar p B1 @ n']] 
                \\
                [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B2 @ n']]
          }{[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p (B1 -> bar p B2) @ m]]}
        \end{math}
      \end{center}
      We can easily derive $[[Gr |- m' <= bar p * n']]$ as follows:
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{rel\_flip}] {
            $$\mprset{flushleft}
            \inferrule* [right=\ifrName{rel\_trans}] {
              $$\mprset{flushleft}
              \inferrule* [right=\ifrName{rel\_flip}] {
                [[Gr |- m <= bar p * n']]
              }{[[Gr |- n' <= p * m]]}
              \\
                [[Gr |- m <=p * m']]
            }{[[Gr |- n' <= p * m']]}
          }{[[Gr |- m' <= bar p * n']]}
        \end{math}
      \end{center}
      This case then follows by applying the induction hypothesis twice to both 
      $[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni, bar p B ! bar d @ m |- bar p B1 @ n']]$
      and
      $[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni, bar p B ! bar d @ m |- p B2 @ n']]$
      using the assumptions
      $[[Gr |- n1 <= p1 * n'1]]$, \ldots, $[[Gr |- ni <= pi * n'i]]$, $[[Gr |- m <= p * m']]$,
      and the fact that we know $[[Gr |- n' <=p * n']]$ and $[[Gr |- n' <=bar p * n']]$.
      
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{axCut}] {
            [[bar pj Aj @ nj in (bar p1 A1 @ n1 , ... , bar pi Ai @ ni)]] 
            \\
              [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni, bar p B @ m |- pj Aj @ nj]]
          }{[[Gr; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B @ m]]}
        \end{math}
      \end{center}
      We know by assumption that $[[Gr |- n1 <= p1 * n'1]]$, \ldots, $[[Gr |- ni <= pi * n'i]]$, and $[[Gr |- m <= p * m']]$.
      In particular, we know $[[Gr |- nj <= pj * n'j]]$.  It is also the case that if 
      $[[bar pj Aj @ nj in (bar p1 A1 @ n1 , ... , bar pi Ai @ ni)]]$, then 
      $[[bar pj Aj @ n'j in (bar p1 A1 @ n' dots bar pi Ai @ n'i)]]$.  This case then follows by applying the induction
      hypothesis to $[[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni, bar p B @ m |- pj Aj @ nj]]$, to obtain,
      $[[Gr ; bar p1 A1 @ n'1 dots bar pi Ai @ n'i, bar p B @ m'1 |- pj Aj @ n'j]]$, followed by applying the
      $\ifrName{axCut}$ rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{axCutBar}] {
            [[bar pj Aj @ nj in (bar p1 A1 @ n1 , ... , bar pi Ai @ ni)]] 
            \\
            [[Gr ; bar p1 A1 @ n1 , ... , bar pi Ai @ ni , bar p B @ m |- pj Aj @ nj]]
          }{[[Gr; bar p1 A1 @ n1 , ... , bar pi Ai @ ni |- p B @ m]]}
        \end{math}
      \end{center}
      Similar to the previous case.
    \end{itemize}
  \end{proof}
\noindent
The proofs of the admissible rules MonoL and MonoR depend on the
following monotonicity result.
\begin{corollary}[Monotonicity]
  \label{coro:mono}
  Suppose $[[Gr |- n1 <=p* n2]]$.  Then
  \begin{itemize}
  \item[i.]  if $[[Gr ; G , bar p A @ n1 , G' |- p' B @ n']]$, then 
    $[[Gr ; G , bar p A @ n2 , G' |- p' B @ n']]$, and
  \item[ii.] if $[[Gr ; G |- p A @ n1]]$, then $[[Gr ; G |- p A @ n2]]$.    
  \end{itemize}
\end{corollary}
\begin{proof}
  This result follows easily from Lemma~\ref{lemma:genmono}.
\end{proof}

%% End derived rules.
We now have everything we need to prove that every derivable sequent
of L can be translated to a derivable sequent in DIL. The proof
technique we use here does not provide an algorithm taking a sequent
of L and yielding a derivable sequent in DIL.  Such an algorithm would
have to choose a particular conclusion in the L-sequent to be the
active formula of the DIL-sequent, but this is quite difficult.
Instead we show that all possible conclusions in the L-sequent can be
chosen to be active and yield a derivable DIL-sequent.

Using the translation of formulas given in
Definition~\ref{def:L-form-to-DIL-form} we can easily translate
contexts.  Right contexts $<<G>>$ in L are translated to positive
hypotheses, while left contexts, not including the formula chosen as
the active formula, are translated into negative hypotheses.  The
following definition defines the translation of both types of
contexts.
\begin{definition}
  \label{def:trans-L-ctx-to-DIL-ctx}
  We extend the translation of formulas to contexts $<<G>>$ and
  $<<D>>$ with respect to a polarity $<<p>>$ as follows:
  \begin{center}
    \begin{math}
      \begin{array}{lll}
        <<{ . } p>> & = & [[.]]\\
        & \\
        <<{ n : A , G } p>> & = & [[p{A}@n,{G}p]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}
Abstract Kripke models are straightforward to translate.
\begin{definition}
  \label{def:trans-L-ctx-to-DIL-ctx}
  We define the translation of graphs $<<Gr>>$ in L to graphs in DIL
  as follows:
  \begin{center}
    \begin{math}
      \begin{array}{lll}
        <<- . ->> & = & [[.]]\\
        & \\
        <<- (n1 , n2) , Gr ->> & = & [[n1 <=+ n2, -Gr-]]\\
      \end{array}
    \end{math}
  \end{center}
\end{definition}
\noindent
The previous definition implies the following result:
\begin{lemma}[Reachability]
  \label{lemma:reach}
  If $<<n1 Gr n2>>$, then $[[-Gr- |- n1 <=+* n2]]$.
\end{lemma}

The translation of a derivable L-sequent is a DIL-sequent which
requires a particular formula as the active formula.  We define
such a translation in the following definition.
\begin{definition}
  \label{def:focusing}
  An activation of a derivable L-sequent $<<G |- Gr D>>$ is a DIL-sequent
  $[[-Gr-;{G}+,{D1,D2}- |- +{A}@n]]$, where $<<D>> = <<D1,n : A,D2>>$.
\end{definition}
Finally, the following theorem is the main result showing that any
activation of a derivable L-sequent is derivable in DIL.
\begin{thm}[Containment of L in DIL]\index{Containment of L in DIL}
  \label{thm:completeness}
  If $[[-Gr- ; G' |- + A @ n]]$ is an activation of the derivable L-sequent 
  $<<G |- Gr D>>$, then $[[-Gr- ; G' |- + A @ n]]$ is derivable.
\end{thm}
  \begin{proof}
  This is a proof by induction on the form of the sequent $<<G |- Gr D>>$.

  \begin{itemize}
  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{refl}] {
          <<G |- h(Gr,(n,n)) D>>
        }{<<G |- Gr D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis that every activation of $<<G |- h(Gr,(n,n)) D>>$ is derivable.  
    Suppose that $[[-Gr,(n,n)- ; G' |- + A @ n]]$ is an arbitrary activation, where
    $[[{D}-]] \equiv [[{D1}-,-A@n,{D2}-]]$ and $[[G']] \equiv [[{D1}-,{D2}-]]$.
    This is equivalent to $[[-Gr-, n <=+ n ; G' |- + A @ n]]$, and 
    by the admissible rule for reflexivity (Lemma~\ref{lemma:reflexivity}) we have 
    $[[-Gr- ; G' |- + A @ n]]$.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{Trans}] {
          <<n1 Gr n2>>
          \\\\
              <<n2 Gr n3>>
              \\\\
              <<G |- h(Gr,(n1,n3)) D>>
        }{<<G |- Gr D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis that every activation of $<<G |- h(Gr,(n1,n3)) D>>$ is derivable.  
    Suppose that $[[-Gr,(n1,n3)- ; G' |- + A @ n]]$ is an arbitrary activation, where
    $[[{D}-]] \equiv [[{D1}-,-A@n,{D2}-]]$ and $[[G']] \equiv [[{D1}-,{D2}-]]$.  This sequent
    is equivalent to $[[-Gr-,n1 <=+ n3 ; G' |- + A @ n]]$.  Furthermore, it is clear by definition that
    if $<<n1 Gr n2>>$ and $<<n2 Gr n3>>$, then $[[n1 <=+ n2 in -Gr-]]$ and $[[n2 <=+ n3 in -Gr-]]$.  Thus,
    by the admissible rule for transitivity (Lemma~\ref{lemma:transitivity}) we have $[[-Gr- ; G' |- + A @ n]]$,
    and we obtain our result.
    

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{hyp}] {
          \ 
        }{<<G, n : A |- Gr n : A , D>>}
      \end{math}
    \end{center}
    It suffices to show that every activation of $<<G, n : A |- Gr n : A , D>>$ is derivable.  Clearly,
    $[[-Gr-; {G}+,+{A}@n,{D}- |- + {A}@n]]$ is a activation of $<<G, n : A |- Gr n : A , D>>$.  In addition,
    it is derivable:
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=Exchange] {
          $$\mprset{flushleft}
        \inferrule* [right=Ax] {
          $$\mprset{flushleft}
          \inferrule* [right=Refl] {
            \ 
          }{[[-Gr- |- n <=+* n]]}
        }{[[-Gr-; {G}+,{D}-,+{A}@n |- + {A}@n]]}
        }{[[-Gr-; {G}+,+{A}@n,{D}- |- + {A}@n]]}
      \end{math}
    \end{center}
    In the previous derivation we make use of the exchange rule which
    is admissible by Lemma~\ref{lemma:exchange}.

    Now consider any other activation $[[-Gr- ; G' |- + B @ n']]$.  It must be the case that 
    $[[G']] = [[h(h(h({G}+ , + A @ n ) , {D1}-), -{A} @ n ),{D2}-]]$ for some $<<D1>>$ and $<<D2>>$.
    This sequent is then derivable as follows:
    \begin{center}
      \small
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\scriptsize Left-to-Right] {
          $$\mprset{flushleft}
          \inferrule* [right=\scriptsize Exchange] {
            $$\mprset{flushleft}
          \inferrule* [right=\scriptsize Ax] {
            $$\mprset{flushleft}
            \inferrule* [right=\scriptsize Refl] {
              \ 
            }{[[-Gr- |- n <=+* n]]}
          }{[[-Gr- ; {G}+ , {D1}- ,{D2}- , - B @ n', + A @ n |- +{A} @ n ]] }
          }{[[-Gr- ; h(h(h({G}+ , + A @ n ) , {D1}-),{D2}-),- B @ n' |- +{A} @ n ]]}
        }{[[-Gr- ; h(h(h({G}+ , + A @ n ) , {D1}-), -{A} @ n ),{D2}- |- + B @ n']]}
      \end{math}
    \end{center}
    Thus, we obtain our result.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{monL}] {
          <<n1 Gr n2>>
          \\\\
          <<G , n1 : A , n2 : A |- Gr D>>
        }{<<G , n1 : A |- Gr D>>}
      \end{math}
    \end{center}
    Certainly, if $<<n1 Gr n2>>$, then $[[n1 <=+ n2]] \in [[-Gr-]]$.
    We know by the induction hypothesis that all activations of $<<G , n1 : A , n2 : A |- Gr D>>$ are
    derivable.  Suppose $[[-Gr- ; G' |- + B @ n]]$ is an arbitrary activation.  Then it must be the case
    that $[[G']] \equiv [[{G}+, +A@n1,+A@n2,{D1}-,{D2}-]]$, where $[[{D}-]] \equiv [[{D1}-,-B@n,{D2}-]]$.
    Now we apply the monoL admissible rule (Lemma~\ref{lemma:monol}) to obtain 
    $[[-Gr- ; {G}+, +A@n1,{D1}-,{D2}- |- + B @ n]]$, which is an arbitrary activation of 
    $<<G , n1 : A |- Gr D>>$.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{monR}] {
          <<n1 Gr n2>>
          \\\\
          <<G |- Gr n1 : A , n2 : A, D>>
        }{<<G |- Gr n2 : A, D>>}
      \end{math}
    \end{center}    
    If $<<n1 Gr n2>>$, then $[[n1 <=+ n2]] \in [[-Gr-]]$.  We know by the induction hypothesis that
    all activations of $<<G |- Gr n1 : A , n2 : A, D>>$ are derivable.  In particular, the activation
    (modulo exchange (Lemma~\ref{lemma:exchange})) $[[-Gr-; {G}+, {D}-, -A@n1 |- + A @ n2]]$ is
    derivable.  It suffices to show that $[[-Gr-; {G}+, {D}- |- + A @ n2]]$. This follows from
    the monoR admissible rule (Lemma~\ref{lemma:monor}).  Finally, any other activation of $<<G |- Gr n2 : A, D>>$
    can be activated into $[[-Gr-; {G}+, {D}- |- + A @ n2]]$ (Lemma~\ref{lemma:refocus}).  Thus,
    we obtain our result.
    
  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{trueL}] {
          <<G |- Gr D>>
        }{<<G , n' : True |- Gr D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis that all activations of $<<G |- Gr D>>$
    are derivable.  Suppose $[[-Gr- ; G' |- + A @ n]]$ is an arbitrary
    activation of $<<G |- Gr D>>$.  Then it must be the case that $[[G']] = [[{G}+,{D1}-,{D2}-]]$, where
    $[[{D}-]] \equiv [[{D1}-,-A@n,{D2}-]]$.  Now by weakening (Lemma~\ref{lemma:weakening}) we know 
    $[[-Gr- ; G', + < + > @ n' |- + A @ n]]$, and by exchange (Lemma~\ref{lemma:exchange})
    $[[-Gr- ; + < + > @ n', G' |- + A @ n]]$, which is exactly an arbitrary activation of
    $<<G , n' : True |- Gr D>>$.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{trueR}] {
          \ 
        }{<<G |- Gr n : True, D>>}
      \end{math}
    \end{center}
    It suffices to show that every activation of $<<G |- Gr n : True, D>>$ is derivable.
    Consider the activation $[[-Gr- ; {G}+ , {D}- |- + {True} @ n]]$.  This is easily derivable
    by applying the \ifrName{unit} rule.  Now any other activation of
    $<<G |- Gr n : True, D>>$ 
    implies $[[-Gr- ; {G}+ , {D}- |- + {True} @ n]]$ is derivable by Lemma~\ref{lemma:refocus}, and hence,
    are derivable.


  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{falseL}] {
          \ 
        }{<<G, n : False |- Gr D>>}
      \end{math}
    \end{center}
    Suppose $[[-Gr-; {G}+, +{False}@n, {D1}-,{D2}- |- + A @ n']]$ is an arbitrary activation of 
    $<<G, n : False |- Gr D>>$, where $[[{D}-]] \equiv [[{D1}-,-A@n',{D2}-]]$.  
    We can easily see that by definition $[[-Gr-; {G}+, +{False}@n, {D1}-,{D2}- |- + A @ n']]$
    is equivalent to $[[-Gr-; {G}+, +<->@n, {D1}-,{D2}- |- + A @ n']]$. We can derive the latter as follows:
    \begin{center}
      \footnotesize
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right={\footnotesize \ifrName{axCutBar}}] {
          [[+<->@n in G', -A@n']]
          \\
          $$\mprset{flushleft}
          \inferrule* [right=\footnotesize \ifrName{unit}] {
            \ 
          }{[[-Gr-; G', -A @ n' |- - <-> @ n]]}
        }{[[-Gr-; {G}+, +<->@n, {D1}-,{D2}- |- + A @ n']]}
      \end{math}
    \end{center}
    In the previous derivation $[[G']] \equiv [[{G}+, +<->@n,
    {D1}-,{D2}-]]$.  Thus, any activation of $<<G, n : False |- Gr D>>$ is  derivable.
    

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{falseR}] {
          <<G |- Gr D>>
        }{<<G |- Gr n' : False, D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis that all activations of $<<G |- Gr D>>$
    are derivable.  Suppose $[[-Gr- ; G' |- + A @ n]]$ is an arbitrary activation of 
    $<<G |- Gr D>>$.  Then it must be the case that $[[G']] = [[{G}+,{D}-]]$.
    Now by weakening (Lemma~\ref{lemma:weakening}) we know $[[-Gr- ; G', - < - > @ n' |- + A @ n]]$,
    and by the left-to-right lemma (Lemma~\ref{lemma:refocus}) $[[-Gr- ; G', - A @ n |- + < - > @ n' ]]$, which --
    modulo exchange -- is equivalent to $[[-Gr- ; {G}+,{D}- |- + { False} @ n' ]]$.  Thus, we obtain
    our result.
    

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{andL}] {
          <<G , n : T1, n : T2 |- Gr D>>
        }{<<G , n : T1 /\ T2   |- Gr D>>}
      \end{math}
    \end{center}
        We know by the induction hypothesis that all activations of $<<G , n : T1, n : T2 |- Gr D>>$
    are derivable.  In particular, we know $[[-Gr- ; {G}+,+T1@n, +T2@n, {D1}-,{D2}- |- + A @ n']]$ where
    $[[{D}-]] = [[{D1}-]],-A@n',[[{D2}-]]$. Using exchange we know $[[-Gr- ; {G}+,{D1}-,{D2}-,+T1@n, +T2@n |- + A @ n']]$, and
    by the left-to-right lemma $[[-Gr- ; {G}+, {D1}-,{D2}-, +T1@n, - A @ n' |- - T2@n]]$, and finally by one more application
    of exchange $[[-Gr- ; {G}+, {D1}-, {D2}-,- A @ n', +T1@n |- - T2@n]]$.  At this point we know 
    $[[-Gr- ; {G}+, {D1}-, {D2}-, - A @ n' |- - T1 /\+ T2 @ n]]$ by the using the admissible $\ifrName{andL}$ rule (Lemma~\ref{lemma:andl}).
    Now using left-to-right \\
    $[[-Gr- ; {G}+, {D1}-, {D2}-, + T1 /\+ T2 @ n  |- + A @ n']]$ is derivable. Lastly, by exchange 
    $[[-Gr- ; {G}+, + T1 /\+ T2 @ n, {D1}-, {D2}- |- + A @ n']]$ is derivable, which is clearly and an arbitrary
    activation of $<<G , n : T1 /\ T2   |- Gr D>>$.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{andR}] {
          <<G |- Gr n : A, D>>
          \\\\
          <<G |- Gr n : B, D>>
        }{<<G |- Gr n : A /\ B, D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis that all activations of $<<G |- Gr n : A, D>>$ and
    $<<G |- Gr n : B, D>>$ are derivable.  In particular, $[[-Gr- ; {G}+,{D}- |- +A @ n]]$
    and $[[-Gr- ; {G}+,{D}- |- +B @ n]]$ are derivable. Now by applying the $\ifrName{and}$ rule
    we obtain $[[-Gr- ; {G}+,{D}- |- + A /\+ B @ n]]$, which is a particular activation of 
    $<<G |- Gr n : A /\ B, D>>$. Finally, consider any other activation, then that sequent implies 
    $[[-Gr- ; {G}+,{D}- |- + A /\+ B @ n]]$ is derivable using Lemma~\ref{lemma:refocus}.  
    Thus, we obtain our result.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{disjL}] {
          <<G, n : A |- Gr D>>
          \\\\
          <<G, n : A |- Gr D>>
        }{<<G, n : A \/ B |- Gr D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis that all activations of $<<G, n : A |- Gr D>>$ and
    $<<G, n : B |- Gr D>>$ are derivable.  So suppose $[[-Gr-; {G}+,+{A}@n,{D'}- |- + C @ n']]$ and
    $[[-Gr-; {G}+,+{B}@n,{D'}- |- + E @ n'']]$ are particular activations, 
    where $[[{D}-]] \equiv [[{D1}-,-C@n',{D2}-,-E@n'',{D3}-]]$, and $[[{D'}-]] \equiv [[{D1}-,{D2}-,{D3}-]]$.
    By exchange (Lemma~\ref{lemma:exchange}) we know \\
    $[[-Gr-; {G}+,{D'}-,+{A}@n |- + C @ n']]$ 
    and  $[[-Gr-; {G}+,{D'}-,+{B}@n |- + E @ n'']]$.  Now by the left-to-right lemma (Lemma~\ref{lemma:refocus}) we know \\
    $[[-Gr-; {G}+,{D'}-, - C @ n' |- -{A}@n]]$ and $[[-Gr-; {G}+,{D'}-, - E @ n'' |- -{B}@n]]$, and by applying
    weakening (and exchange) we know \\ $[[-Gr-; {G}+,{D'}-, - C @ n', - E @ n'' |- -{A}@n]]$ and 
    $[[-Gr-; {G}+,{D'}-, -C@n',- E @ n'' |- -{B}@n]]$.  At this point we can apply 
    the $\ifrName{and}$ rule to obtain $[[-Gr-; {G}+,{D'}-, - C @ n',- E @ n'' |- - {A} /\- {B} @ n]]$ to which we can apply
    the left-to-right lemma to and obtain \\
    $[[-Gr-; {G}+,{D'}-,- E @ n'',+ {A} /\- {B} @ n |- + C @ n']]$.  Finally, we can apply 
    exchange again to obtain $[[-Gr-; {G}+, + {A} /\- {B} @ n, {D'}-,- E @ n'' |- + C @ n']]$, which -- modulo exchange -- is
    an arbitrary activation of $<<G, n : A \/ B |- Gr D>>$.   Thus, we obtain our result.
    

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{disjR}] {
          <<G |- Gr x : T1, x : T2, D>>
        }{<<G |- Gr x : T1 \/ T2, D>>}
      \end{math}
    \end{center}
    This case is similar to the case of $\ifrName{andR}$ case, except,
    it makes use of the $\ifrName{andBar}$ rule.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{impL}] {
          <<n1 Gr n2>>
          \\\\
          <<G |- Gr n2 : T1, D>>
          \\\\
          <<G, n2 : T2 |- Gr D>>
        }{<<G , n1 : T1 -> T2 |- Gr D>>}
      \end{math}
    \end{center}   
    We know by the induction hypothesis that all activations of $<<G |- Gr y : T1, D>>$ and 
    $<<G, y : T2 |- Gr D>>$ are derivable.  In particular, we know 
    $[[-Gr-;{G}+,{D}- |- +{T1}@n2]]$ is derivable, and so is $[[-Gr-;{G}+, {D}- |- -{T2}@n2]]$. The latter
    being derivable by applying the induction hypothesis followed by exchange 
    (Lemma~\ref{lemma:exchange}) and the left-to-right lemma (Lemma~\ref{lemma:refocus}). We know $<<n1 Gr n2>>$ by assumption
    and so by Lemma~\ref{lemma:reach} $[[-Gr- |- n1 <=+* n2]]$.  Thus, by applying the \ifrName{impBar} rule we obtain
    $[[-Gr-;{G}+,{D}- |- - {T1}->+{T2} @ n1]]$.  At this point we can apply left-to-right to the previous sequent and obtain 
    and activation of $<<G , n1 : T1 -> T2 |- Gr D>>$, thus we obtain our result.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{impR}] {
          <<n2 notin Gr, G, D>>
          \\\\
          <<G, n2 : T1 |- h(Gr U {(n1,n2)}) n2 : T2, D>>
        }{<<G |- Gr n1 : T1 -> T2, D>>}
      \end{math}
    \end{center}
    This case follows the same pattern as the previous cases.  We know by the induction hypothesis
    that all activations of $<<G, y : T1 |- h(Gr U {(x,y)}) y : T2, D>>$ are derivable.  In particular,
    $[[-Gr-,n1 <=+ n2 ; {G}+, +{T1}@n2,{D}- |- +{T2}@n2]]$ is
    derivable.  By exchange (Lemma~\ref{lemma:exchange})
    $[[-Gr-,n1 <=+ n2 ; {G}+, {D}-,+{T1}@n2 |- +{T2}@n2]]$ is derivable, and by applying the $\ifrName{imp}$ rule
    we obtain $[[-Gr- ; {G}+, {D}- |- + {T1} ->+ {T2}@n1]]$, which is a particular activation of 
    $<<G |- Gr n1 : T1 -> T2, D>>$.  Note that in the previous application of $\ifrName{imp}$ we use
    the fact that if $<<n2 notin Gr, G, D>>$, then $[[n2 notin |-Gr-|,|{G}+,{D}-|]]$. 
    Lastly, any other activation of $<<G |- Gr n1 : T1 -> T2, D>>$ implies
    $[[-Gr- ; {G}+, {D}- |- + {T1} ->+ {T2}@n1]]$ is derivable by the left-to-right lemma, and hence is derivable.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{subL}] {
          <<n1 notin Gr, G, D>>
          \\\\
          <<G, n1 : T1 |- h(Gr U {(n1,n2)}) n1 : T2, D>>
        }{<<G, n2 : T1 - T2 |- Gr D>>}
      \end{math}
    \end{center}
    We know by the induction hypothesis
    that all activation of \\ $<<G, n1 : T1 |- h(Gr U {(n1,n2)}) n1 : T2, D>>$ are derivable.  In particular,
    $[[-Gr-,n1 <=+ n2 ; {G}+, +{T1}@n1,{D}- |- +{T2}@n1]]$ is
    derivable.  By exchange \\ (Lemma~\ref{lemma:exchange})
    $[[-Gr-,n1 <=+ n2 ; {G}+, {D}-,+{T1}@n1 |- +{T2}@n1]]$ is derivable.  Now by the left-to-right lemma we know \\
    $[[-Gr-,n1 <=+ n2 ; {G}+, {D}-,-{T2}@n1 |- -{T1}@n1]]$, and by
    assumption we know $<<y notin Gr, G, D>>$ which implies 
    $[[n1 notin |-Gr-|,|{G}+,{D}-|]]$ is derivable.  Thus, by applying the $\ifrName{imp}$ rule we know  
    $[[-Gr-,n1 <=+ n2 ; {G}+, {D}- |- - {T2} ->- {T1}@n2]]$ is derivable.  Clearly, this is a particular activation of
    $<<G, n2 : T1 - T2 |- Gr D>>$, and any other activation implies
    $[[-Gr-,n1 <=+ n2 ; {G}+, {D}- |- - {T2} ->- {T1}@n2]]$ is derivable by the left-to-right lemma, and hence are derivable.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{subR}] {
          <<y Gr x>>
          \\\\
          <<G |- Gr y : T1 , D>>
          \\\\
          <<G, y : T2 |- Gr D>>
        }{<<G |- Gr x : T1 - T2, D>>}
      \end{math}
    \end{center}
    This case follows in the same way as the case for $\ifrName{impL}$,
    except the particular activation of $<<G, y : T2 |- Gr D>>$ has to have the active formulas such that the
    rule $\ifrName{impBar}$ can be applied.
  \end{itemize}
\end{proof}

\begin{corollary}[Completeness]\index{Completeness}
  \label{corollary:completeness}
  DIL is complete.
\end{corollary}
\begin{proof}
  Completeness of L is proved in \cite{Pinto:2009}, and by Theorem~\ref{thm:completeness} we know that
  every derivable sequent of L is derivable in DIL.
\end{proof}
% section completeness (end)
% section dualized_intuitionistic_logic (end)

\section{Type Preservation and Strong Normalization of DTT}
\label{sec:dualized_type_theory}
We now present the basic metatheory of DTT, starting with type
preservations. We begin with the inversion lemma which is necessary
for proving type preservation.
\begin{lemma}[Inverstion]\index{Dualized Type Theory!Inversion}
  \label{lemma:inverstion}
  \begin{itemize}
  \item[] 
  \item[i.] If $[[Gr;H, x : p A @ n, H' |- x : p A @ n']]$, then 
    $[[Gr |- n <=p* n']]$.
  \item[ii.] If $[[Gr;H |- (t1,t2) : p (A /\p B) @ n]]$, then 
    $[[Gr;H |- t1 : p A @ n]]$ and $[[Gr;H |- t2 : p B @ n]]$.
  \item[iii.] If $[[Gr;H |- inj d t : p (A1 /\bar p A2) @ n]]$, then 
    $[[Gr;H |- t : p A!d @ n]]$.
  \item[iv.] If $[[Gr;H |- \x.t : p (A ->p B)@n]]$, then 
    $[[(Gr, n <=p n');H,x : p A @ n' |- t : p B @ n']]$ for any
    $[[n' notin |Gr|,|G|]]$.
  \item[v.] If $[[Gr;H |- <t1,t2> : p (A ->bar p B) @ n]]$, then
    $[[Gr |- n <=bar p * n']]$, $[[Gr;H |- t1 : bar p A @ n']]$, and
    $[[Gr;H |- t2 : p B @ n']]$ for some node $[[n']]$.
  \end{itemize}
\end{lemma}
\begin{proof}
  Each case of the above lemma holds by a trivial proof by induction
  on the assumed typing derivation.
\end{proof}
\noindent The lemmas node substitution for typing and substitution for
typing are essential for the cases of type preservation that reduce a
top-level redex. Node substitution, denoted $[[ [n1/n2]n]]$, is defined as
follows: 
\begin{center}
  \begin{math}
    \begin{array}{lll}
      [[ [n1/n2] n2 ]] & = & [[n1]]\\
      [[ [n1/n2] n  ]] & = & [[n]] \text{ where } [[n]] \text{ is
        distinct from } [[n2]]
    \end{array}
  \end{math}
\end{center}
The following lemmas are necessary in the proof of node substitution
for typing.
\begin{lemma}[Node Renaming]\index{Dualized Type Theory!Node Renaming}
  \label{lemma:renaming_nodes_in_graph}
  If $[[Gr1, Gr2 |- n1 <=p* n3]]$, then for any nodes $[[n4]]$ and
  $[[n5]]$, where $[[n5]]$ is distinct from $[[n1]]$ and $[[n3]]$,
  we have $[[ [n4/n5]Gr1, [n4/n5]Gr2 |- n1 <=p* n3]]$.
\end{lemma}
\begin{proof}
  This is a proof by induction on the assumed reachability
  derivation.  Throughout each case suppose we have nodes $[[n4]]$
  and $[[n5]]$.
  
  \begin{itemize}
  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{ax}] {
          \ 
        }{[[Gr , n1 <= p n3 , Gr' |- n1 <= p * n3]]}
      \end{math}
    \end{center}
    Trivial.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{refl}] {
          \ 
        }{[[Gr1,Gr2 |- n <= p * n]]}
      \end{math}
    \end{center}
    Trivial.
    
  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{trans}] {
          [[Gr1,Gr2 |- n1 <= p * n' &&  Gr1,Gr2 |- n' <= p * n3]]
        }{[[Gr1,Gr2 |- n1 <= p * n3]]}
      \end{math}
    \end{center}
    By the induction hypothesis we know that for any nodes $[[n'4]]$ and $[[n'5]]$ that
    $[[ [n'4/n'5]Gr1,[n'4/n'5]Gr2 |- n1 <= p * n']]$, and for any nodes $[[n''4]]$ and $[[n''5]]$ that
    $[[ [n''4/n''5]Gr1, [n''4/n''5]Gr2 |- n' <= p * n3]]$.  Choose $[[n4]]$ for $[[n'4]]$ and $[[n''4]]$ and
    $[[n5]]$ for $[[n'5]]$ and $[[n''5]]$ to obtain $[[ [n4/n5]Gr1,[n4/n5]Gr2 |- n1 <= p * n']]$ and
    $[[ [n4/n5]Gr1, [n4/n5]Gr2 |- n' <= p * n3]]$.  Finally, this case follows by reapplying the 
    rule to the previous two facts.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{flip}] {
          [[Gr |- n' <= bar p * n]]
        }{[[Gr |- n <= p * n']]}
      \end{math}
    \end{center}
    Similar to the previous case.

  \end{itemize}
\end{proof}

\begin{lemma}[Node Substitution for Reachability]\index{Dualized Type
    Theory!Node Substitution for Reachability}
  \label{lemma:node_substitution_for_reachability}
  If $[[Gr, n1 <=p1 n2,Gr' |-n4 <=p* n5]]$ and $[[Gr, Gr' |- n1 <=p1* n3]]$, then 
  $[[ [n3/n2]Gr,[n3/n2]Gr' |- [n3/n2]n4 <=p* [n3/n2]n5]]$. 
\end{lemma}
\begin{proof}
  This is a proof by induction on the form of the assumed reachability
  derivation.  Throughout the following cases we assume $[[Gr, Gr' |-
  n1 <=p1* n3]]$ holds.
  
  \begin{itemize}
  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{ax}] {
          \ 
        }{[[Gr1 , n4 <= p n5 , Gr2 |- n4 <= p * n5]]}
      \end{math}
    \end{center}
    Suppose $[[Gr1, n4 <= p n5, Gr2]] = [[Gr, n1 <=p1 n2,Gr']]$.  Then
    either $[[n1 <=p1 n2]] \in [[Gr1]]$, $[[n1 <=p1 n2]] \in [[Gr2]]$,
    or $[[n1 <=p1 n2]] \equiv [[n4 <=p n5]]$.  Suppose $[[n1 <=p1 n2]] \in [[Gr1]]$,
    then $[[Gr1]] = [[Gr'1, n1 <=p n2,Gr''1]]$.  Then it is easy to see that
    $[[ [n3/n2]Gr'1,[n3/n2]Gr''1 , [n3/n2]n4 <= p [n3/n2]n5 , [n3/n2]Gr2 |- [n3/n2]n4 <= p * [n3/n2]n5]]$
    is derivable by applying $\dttdrulename{Ax}$.  The case where $[[n1 <=p1 n2]] \in [[Gr2]]$ is
    similar.

    Now suppose $[[n1 <=p1 n2]] \equiv [[n4 <=p n5]]$.  Then we know by assumption that 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{ax}] {
          \ 
        }{[[Gr1 , n1 <= p n2 , Gr2 |- n1 <= p * n2]]}
      \end{math}
    \end{center}
    Then it suffices to show $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- [n3/n2]n1 <= p * [n3/n2]n2]]$, which is equivalent
    to $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- [n3/n2]n1 <= p * n3]]$.  Now if $[[n1]]$ is equivalent to $[[n2]]$, then
    $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- [n3/n2]n1 <= p * n3]]$ holds by reflexivity, and if $[[n1]]$ is distinct from $[[n2]]$,
    then $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- [n3/n2]n1 <= p * n3]]$ is equivalent to 
    $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- n1 <= p * n3]]$.  We know by assumption that $[[Gr, Gr' |- n1 <=p1* n3]]$ holds, which
    is equivalent to $[[Gr1, Gr2 |- n1 <=p* n3]]$.  Now if $[[n3]]$ is equal to $[[n2]]$, then 
    $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- n1 <= p * n3]]$ is equivalent to $[[Gr1, Gr2 |- n1 <=p* n3]]$.  So suppose
    $[[n3]]$ is distinct from $[[n2]]$, then by Lemma~\ref{lemma:renaming_nodes_in_graph} we know 
    $[[ [n3/n2]Gr1 , [n3/n2]Gr2 |- n1 <= p * n3]]$.        
    
  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{refl}] {
          \ 
        }{[[Gr, n1 <=p1 n2,Gr' |- n <= p * n]]}
      \end{math}
    \end{center}
    Trivial.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{trans}] {
          [[Gr, n1 <=p1 n2,Gr' |- n4 <= p * n6 &&  Gr |- n6 <= p * n5]]
        }{[[Gr, n1 <=p1 n2,Gr' |- n4 <= p * n5]]}
      \end{math}
    \end{center}
    This case by applying the induction to each premise, and then
    reapplying the rule.

  \item[Case.]\ \\ 
    \begin{center}
      \begin{math}
        $$\mprset{flushleft}
        \inferrule* [right=\ifrName{flip}] {
          [[Gr, n1 <=p1 n2,Gr' |- n5 <= bar p * n4]]
        }{[[Gr, n1 <=p1 n2,Gr' |- n4 <= p * n5]]}
      \end{math}
    \end{center}
    This case holds by applying the induction hypothesis to the
    premise, and then reapplying the rule.    
  \end{itemize}
\end{proof}

\begin{lemma}[Node Substitution for Typing]\index{Dualized Type
    Theory!Node Substitution for Typing}
  \label{lemma:node_substitution_for_typing}
  If $[[Gr, n1 <=p1 n2,Gr' ; H |- t : p2 A @ n3]]$ and $[[Gr,Gr' |- n1 <=p1 * n4]]$, then
  $[[ [n4/n2]Gr,[n4/n2]Gr'; [n4/n2]H |- t : p2 A @ [n4/n2]n3]]$. 
\end{lemma}
  \begin{proof}
    This is a proof by induction on the form of the assumed typing
    derivation.  Throughout each of the following cases we assume
    $[[Gr,Gr' |- n1 <=p1 * n4]]$ holds.

    \begin{itemize}
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Ax}] {
            [[Gr, n1 <=p1 n2,Gr' |- n <= p * n3]]
          }{[[Gr, n1 <=p1 n2,Gr' ; H1 , y : p2 A @ n , H2 |- y : p2 A @ n3]]}
        \end{math}
      \end{center}
      First, by node substitution for reachability (Lemma~\ref{lemma:node_substitution_for_reachability}) we know
      $[[ [n4/n2]Gr,[n4/n2]Gr' |- [n4/n2]n <= p * [n4/n2]n3]]$.  Thus, by applying the $\dttdrulename{Ax}$ rule we may derive
      $[[ [n4/n2]Gr,[n4/n2]Gr' ; [n4/n2]H1 , y : p2 A @ [n4/n2]n , [n4/n2]H2 |- y : p2 A @ [n4/n2]n3]]$.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Unit}] {
            \ 
          }{[[Gr, n1 <=p1 n2,Gr' ; H |- triv : p2 < p2 > @ n3]]}
        \end{math}
      \end{center}
      Trivial.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{And}] {
            [[Gr, n1 <=p1 n2 ; H |- t1 : p2 A1 @ n3 && Gr, n1 <=p1 n2 ; H |- t2 : p2 A2 @ n3]]
          }{[[Gr, n1 <=p1 n2 ; H |- ( t1 , t2 ) : p2 (A1 /\p2 A2) @ n3]]}
        \end{math}
      \end{center}
      This case holds by applying the induction hypothesis to each
      premise, and then reapplying the rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{AndBar}] {
            [[Gr, n1 <=p1 n2 ; H |- t' : p2 A ! d @ n3]]
          }{[[Gr, n1 <=p1 n2 ; H |- inj d t' : p2 (A1 /\ bar p2 A2) @ n3]]}
        \end{math}
      \end{center}
      This case holds by applying the induction hypothesis to the
      premise, and then reapplying the rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Imp}] {
            [[n' notin | Gr, n1 <=p1 n2,Gr' | , | G |]]
            \\\\
            [[(Gr, n1 <=p1 n2,Gr', n3 <= p n') ; H , x : p2 A1 @ n' |- t' : p2 A2 @ n']]
          }{[[Gr, n1 <=p1 n2,Gr' ; H |- \ x . t' : p2 (A1 ->p2 A2) @ n3]]}
        \end{math}
      \end{center}
      First, if $[[n' notin | Gr, n1 <=p1 n2,Gr' | , | G |]]$, then $[[n' notin | Gr,Gr' | , | G |]]$.  Furthermore,
      we know that $[[ [n4/n2]n' notin | [n4/n2]Gr, [n4/n2]Gr' | , | [n4/n2]G |]]$, because we know 
      $[[n']]$ is distinct from $[[n2]]$ by assumption, and if $[[n']]$ is equal to $[[n4]]$, then 
      $[[n' notin | Gr, n1 <=p1 n2,Gr' | , | G |]]$ implies that $[[n1]]$ must also be $[[n4]]$, because we know by assumption 
      that $[[Gr,Gr' |- n1 <=p1 * n4]]$ which could
      only be derivide by reflexivity since $[[n' notin | Gr,Gr' | , | G |]]$, but we know by assumption that 
      $[[n' notin | Gr, n1 <=p1 n2,Gr' | , | G |]]$ which implies that $[[n']]$ must be distinct from $[[n1]]$, 
      and hence a contradiction, thus $[[n']]$ cannot be $[[n4]]$.  Therefore, we know 
      $[[ n' notin | [n4/n2]Gr, [n4/n2]Gr' | , | [n4/n2]G |]]$.   

      \ \\
      By the induction hypothesis we know 
      \[ [[([n4/n2]Gr,[n4/n2]Gr', [n4/n2]n3 <= p [n4/n2]n') ; [n4/n2]H , x : p2 A1 @ [n4/n2]n' |- t' : p2 A2 @ [n4/n2]n']] \] which
      is equivalent to 
      \[ [[([n4/n2]Gr,[n4/n2]Gr', [n4/n2]n3 <= p n') ; [n4/n2]H , x : p2 A1 @ n' |- t' : p2 A2 @ n']]. \] 
      Finally, this case follows by applying the $\dttdrulename{Imp}$ rule using
      $[[ n' notin | [n4/n2]Gr, [n4/n2]Gr' | , | [n4/n2]G |]]$ and the previous fact.
      

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{ImpBar}] {
            [[Gr, n1 <=p1 n2,Gr' |- n3 <= bar p2 * n']]
            \\\\
            [[Gr, n1 <=p1 n2,Gr' ; H |- t1 : bar p2 A1 @ n'  &&  Gr, n1 <=p1 n2,Gr' ; H |- t2 : p2 A2 @ n']]
          }{[[Gr, n1 <=p1 n2,Gr' ; H |- < t1 , t2 > : p2 (A1 ->bar p2 A2) @ n3]]}
        \end{math}
      \end{center}
      We now by assumption that $[[Gr,Gr' |- n1 <=p1 * n4]]$ holds.  So by node substitution for reachability
      (Lemma~\ref{lemma:node_substitution_for_reachability}) we know $[[ [n4/n2]Gr,[n4/n2]Gr' |- [n4/n2]n3 <= bar p2 * [n4/n2]n']]$.
      Now by the induction hypothesis we know $[[ [n4/n2]Gr,[n4/n2]Gr' ; [n4/n2]H |- t1 : bar p2 A1 @ [n4/n2]n']]$  and \\
      $[[ [n4/n2]Gr,[n4/n2]Gr' ; [n4/n2]H |- t2 : p2 A2 @ [n4/n2]n']]$.  This case then follows by applying the rule
      $\dttdrulename{ImBar}$ to the previous three facts.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Cut}] {
            [[Gr, n1 <=p1 n2,Gr' ; H , y : bar p2 A @ n3 |- t1 : + C @ n]]
            \\\\
            [[Gr, n1 <=p1 n2,Gr' ; H , y : bar p2 A @ n3 |- t2 : - C @ n]]
          }{[[Gr, n1 <=p1 n2,Gr' ; H |- nu x . t1 * t2 : p2 A @ n3]]}
        \end{math}
      \end{center}
      This case follows by applying the induction hypothesis to each premise, and then reapplying
      the rule.
    \end{itemize}  
  \end{proof}

\begin{lemma}[Substitution for Typing]\index{Dualized Type
    Theory!Substitution for Typing}
  \label{lemma:substitution_for_typing}
  If $[[Gr ; H |- t1 : p1 A @ n1]]$ and $[[Gr ; H, x : p1 A @ n1 |- t2 : p2 B @ n2]]$, then
  $[[Gr ; H |- [t1/x]t2 : p2 B @ n2]]$.
\end{lemma}
  \begin{proof}
    This proof holds by a straightforward induction on the second
    assumed typing relation. 
    \begin{itemize}
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Ax}] {
            [[Gr |- n <= p * n']]
          }{[[Gr ; H1 , y : p C @ n , H2 |- y : p C @ n']]}
        \end{math}
      \end{center}
      Trivial.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Unit}] {
            \ 
          }{[[Gr ; H' |- triv : p < p > @ n]]}
        \end{math}
      \end{center}
      Trivial.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{And}] {
            [[Gr ; H' |- t'1 : p A @ n && Gr ; H' |- t'2 : p B @ n]]
          }{[[Gr ; H' |- ( t'1 , t'2 ) : p (C1 /\p C2) @ n]]}
        \end{math}
      \end{center}
      Suppose $[[H']] \equiv [[H, x : p1 B @ n1]]$.  Then this case
      follows from applying the induction hypothesis to each premise and
      then reapplying the rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{AndBar}] {
            [[Gr ; H' |- t : p C ! d @ n]]
          }{[[Gr ; H' |- inj d t : p (C1 /\ bar p C2) @ n]]}
        \end{math}
      \end{center}
      Suppose $[[H']] \equiv [[H, x : p1 B @ n1]]$. Then this case
      follows from applying the induction hypothesis to the premise and
      then reapplying the rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Imp}] {
            [[n' notin | Gr | , | G |]]
            \\\\
            [[(Gr, n <= p n') ; H' , x : p C1 @ n' |- t : p C2 @ n']]
          }{[[Gr ; H' |- \ x . t : p (C1 ->p C2) @ n]]}
        \end{math}
      \end{center}
      Similarly to the previous case.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{ImpBar}] {
            [[Gr |- n <= bar p * n']]
            \\\\
            [[Gr ; H' |- t'1 : bar p C1 @ n'  &&  Gr ; H' |- t'2 : p C2 @ n']]
          }{[[Gr ; H' |- < t'1 , t'2 > : p (C1 ->bar p C2) @ n]]}
        \end{math}
      \end{center}
      Suppose $[[H']] \equiv [[H, x : p1 B @ n1]]$.  Then this case
      follows from applying the induction hypothesis to each premise and
      then reapplying the rule.

    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Cut}] {
            [[Gr ; H' , y : bar p C @ n |- t'1 : + C' @ n']]
            \\\\
            [[Gr ; H' , y : bar p C @ n |- t'2 : - C' @ n']]
          }{[[Gr ; H' |- nu x . t'1 * t'2 : p C @ n]]}
        \end{math}
      \end{center}
      Similarly to the previous case.
    \end{itemize}  
  \end{proof}
\noindent
Finally, we prove type preservation.
\begin{lemma}[Type Preservation]\index{Dualized Type
    Theory!Type Preservation}\index{Type Preservation}
  \label{lemma:type_preservation}
  If $[[Gr ; H |- t : p A@n]]$, and $[[t]] \redto [[t']]$, then $[[Gr ; H |- t' : p A@n]]$.
\end{lemma}
  \begin{proof}
    This is a proof by induction on the form of the assumed typing
    derivation.  We only consider non-trivial cases.  All the other
    cases either follow directly from assumptions or are similar to the
    cases we provide below.

    \begin{itemize}    
    \item[Case.]\ \\ 
      \begin{center}
        \begin{math}
          $$\mprset{flushleft}
          \inferrule* [right=\ifrName{Cut}] {
            [[Gr ; H , x : bar p A @ n |- t1 : + B @ n']]
            \\\\
            [[Gr ; H , x : bar p A @ n |- t2 : - B @ n']]
          }{[[Gr ; H |- nu x . t1 * t2 : p A @ n]]}
        \end{math}
      \end{center}
      The interesting cases are the ones where the assumed cut is a
      redex itself, otherwise this case holds by the induction
      hypothesis.  Thus, we case split on the form of this redex. 
      \begin{itemize}
      \item[Case.] Suppose $[[nu x . t1 * t2 == nu x . \y.t'1 * <t'2,t''2>]]$, thus, $[[t1 == \y.t'1]]$ and $[[t2 == <t'2, t''2>]]$.  
        This then implies that $[[B == B1 -> + B2]]$ for some $[[B1]]$ and $[[B2]]$.  Then 
        \[ [[h(t == nu x . t1 * t2) == nu x . \y.t'1 * <t'2,t''2>]] \redto [[nu x.[t'2/y]t'1 * t''2 == t']]. \]
        Now by inversion we know the following:
        \begin{center}
          \begin{math}
            \begin{array}{lll}
              (1) & [[Gr, (n' <= + n'') ; H, x : bar p A @ n, y : + B1 @ n'' |- t'1 : + B2 @ n'']] \text{ for some } [[n'' notin |Gr|,|H,x : bar p A @ n|]]\\
              (2) & [[Gr ; H , x : bar p A @ n |- t'2 : + B1 @ n''']] \\
              (3) & [[Gr ; H , x : bar p A @ n |- t''2 : - B2 @ n''']]\\
              (4) & [[Gr |- n' <=+* n''']]\\
            \end{array}
          \end{math}
        \end{center}
      \end{itemize}
      Using (1) and (4) we may apply node substitution for typing (Lemma~\ref{lemma:node_substitution_for_typing}) to obtain
      \[ (5)\,[[ [n'''/n'']Gr; [n'''/n'']H, x : bar p A @ n, y : + B1 @ n''' |- t'1 : + B2 @ n''']]. \]
      
      Finally, by applying substitution for typing using (2) and (5) we obtain
      \[ (6)\,[[ [n'''/n'']Gr; [n'''/n'']H, x : bar p A @ n |- [t'2/y]t'1 : + B2 @ n''']],  \]  and since
      $[[n'']]$ is a fresh in $[[Gr]]$ and $[[H]]$ we know (6) is equivalent to
      \[ (7)\,[[ Gr; H, x : bar p A @ n |- [t'2/y]t'1 : + B2 @ n''']].  \]
      Finally, by applying the $\dttdrulename{Cut}$ rule using (7) and (3) we obtain 
      \[ [[ Gr; H |- nu x . [t'2/y]t'1 * t''2 : p A @ n]]. \]
      
    % \item[Case.] Suppose $[[nu x . t1 * t2 == nu x. c * (nu y. t'2 * t''2)]]$ , thus, $[[t1 == c]]$ and $[[t2 == nu y. t'2 * t''2]]$.  
    %   Then \[ [[h(t == nu x . t1 * t2) == nu x. c * (nu y. t'2 * t''2)]] \redto [[nu x.[c/y]t'2 * [c/y]t''2]]. \]
    %   This case then follows the same pattern as the previous case.  We use inversion to obtain the types of $[[c]]$, $[[t'2]]$, and $[[t''2]]$.
    %   Then we use substitution for typing (Lemma~\ref{lemma:substitution_for_typing}) to obtain the fact that $[[ [c/y]t'2]]$ and $[[ [c/y]t''2]]$ have the same type
    %   as $[[t'2]]$ and $[[t''2]]$.  Finally, we obtain our result by applying $\dttdrulename{Cut}$ to the results of the former.
      
      
    \end{itemize}
  \end{proof}
\begin{figure}
    \begin{mathpar}
      \dttdruleClassAx{}     \and
      \dttdruleClassUnit{}   \and
      \dttdruleClassAnd{}    \and
      \dttdruleClassAndBar{} \and
      \dttdruleClassImp{}    \and 
      \dttdruleClassImpBar{} \and
      \dttdruleClassCut{}    
    \end{mathpar}
\caption{Classical typing of DTT terms}
\label{fig:classtp}
\end{figure}
A more substantial property is strong normalization\index{Strong Nomralization} of reduction for
typed terms.  To prove this result, we will prove a stronger property,
namely strong normalization for reduction of terms which are typable
using the system of classical\index{Classical Logic} typing rules in Figure~\ref{fig:classtp}
\cite{crolard01}.  This is justified by the following easy result
(proof omitted), where $[[drop H]]$ just drops the world annotations
from assumptions in $\Gamma$:
\begin{thm}
\label{thm:inttoclass}
If $[[Gr ; H |- t : p A @ n]]$, then $[[ drop H |-c t : p A]]$
\end{thm}

Let $\SN$ be the set of terms which are strongly normalizing with
respect to the reduction relation.  Let \textit{Var} be the set of
term variables, and let us use $x$ and $y$ as metavariables for
variables.  We will prove strong normalization for classically typed
terms using a version of Krivine's classical
realizability~\cite{krivine09}.  We define three interpretations of
types in Figure~\ref{fig:classreal}.  The definition is by mutual
induction, and can easily be seen to well-founded, as the definition
of $\interp{A}^+$ invokes the definition of $\interp{A}^-$ with the
same type, which in turn invokes the definition of $\interp{A}^{+c}$
with the same type; and the definition of $\interp{A}^{+c}$ may invoke
either of the other definitions at a strictly smaller type.  The
reader familiar with such proofs will also recognize the debt owed to
Girard~\cite{gtl90}.  That is we can see that this style of proof is
very similar to proofs by the Tait-Girard reducibility methods -- See
Section~\ref{sec:tait-griard_reduciblity}.

\begin{figure}
\small
\[
\begin{array}{lll}
t \in \interp{A}^+ & \Leftrightarrow & \forall x \in \textit{Var}.\ \forall t'\in\interp{A}^-.\ [[ nu x . t * t' ]] \in \SN\\
t \in \interp{A}^- & \Leftrightarrow & \forall x \in \textit{Var}.\ \forall t'\in\interp{A}^{+c}.\ [[ nu x . t' * t ]] \in \SN\\
t \in \interp{[[< + >]]}^{+c} & \Leftrightarrow & t \in \textit{Var}\ \vee\ t \equiv [[triv]] \\
t \in \interp{[[< - >]]}^{+c} & \Leftrightarrow & t \in \textit{Var}\\
t \in \interp{[[A ->+ B]]}^{+c} & \Leftrightarrow & t \in \textit{Var}\ \vee\ \exists x, t'. t \equiv \lambda x.\, t'\ \wedge\ \forall t''\in\interp{A}^+.\ [t''/x] t'\in\interp{B}^+\\
t \in \interp{[[A ->- B]]}^{+c} & \Leftrightarrow & t \in \textit{Var}\ \vee\ \exists t_1\in\interp{A}^-, t_2\in\interp{B}^+.\ t \equiv [[ < t1 , t2 >]] \\
t \in \interp{[[A /\+ B]]}^{+c} & \Leftrightarrow & t \in \textit{Var}\ \vee\ \exists t_1\in\interp{A}^+, t_2\in\interp{B}^+.\ t \equiv [[ ( t1 , t2 )]] \\
t \in \interp{[[A1 /\- A2]]}^{+c} & \Leftrightarrow & t \in \textit{Var}\ \vee\ \exists d. \exists t'\in\interp{A_d}^+.\ t \equiv [[ inj d t']] 
\end{array}
\]
\caption{Interpretations of types}
\label{fig:classreal}
\end{figure}

\begin{lemma}[Step interpretations]
\label{lem:stepinterp}
If $t\in\interp{A}^+$ and $t\leadsto t'$, then
$t'\in\interp{A}^+$; and similiarly if $t\in\interp{A}^-$ or $t\in\interp{A}^{+c}$.
\end{lemma}
\begin{proof}
The proof is by a mutual well-founded induction.
Assume $t\in\interp{A}^+$ and $t\leadsto t'$.  We must show $t'\in\interp{A}^+$.
For this, it suffices to assume $y\in\textit{Var}$ and $t''\in\interp{A}^-$,
and show $[[nu y . t' * t'']]\in\SN$.  From the assumption that $t\in\interp{A}^+$,
we have 
\[
[[nu y . t * t'']] \in\SN
\]
which indeed implies that 
\[
[[nu y . t' * t'']] \in\SN
\]
A similar argument applies if $t\in\interp{A}^-$.  

For the last part of the lemma, assume $t\in\interp{A}^{+c}$ with
$t\leadsto t'$, and show $t'\in\interp{A}^{+c}$.  The only possible
cases are the following, where $t\not\in\textit{Vars}$.

If $A \equiv [[A1 ->+ A2]]$, then $t$ is of the form $\lambda x.t_a$
for some $x$ and $t_a$, where for all $t_b\in\interp{A_1}^+$, we have
$[t_b/x]t_a\in\interp{A_2}^+$.  Since $t\leadsto t'$, $t'$ must be
$\lambda x.t_a'$ for some $t_a'$ with $t_a\leadsto t_a'$.  It suffices
now to assume an arbitrary $t_b\in\interp{A_1}^+$, and show
$[t_b/x]t_a'\in\interp{A_2}^+$.  But $[t_b/x]t_a\leadsto [t_b/x]t_a'$
follows from $t_a\leadsto t_a'$, so by our IH, we have
$[t_b/x]t_a'\in\interp{A_2}^+$, as required.

If $A\equiv [[A1 ->- A2]]$, then $t$ is of the form $[[< t1 , t2 >]]$
for some $t_1\in\interp{A_1}^-$ and $t_2\in\interp{A_2}^+$; and
$t'\equiv [[< t1' , t2' >]]$ where either $t_1'\equiv t_1$ and $t_2\leadsto t_2'$
or else $t_1\leadsto t_1'$ and $t_2'\equiv t_2$.  Either way, we have
$t_1'\in\interp{A_1}^-$ and $t_2'\in\interp{A_2}^+$ by our IH, so
we have $[[< t1' , t2'>]]\in\interp{[[A1 ->- A2]]}^{+c}$ as required.

The other cases for $A\equiv [[A1 /\p A2]]$ are similar to the previous one.
\end{proof}

\begin{lemma}[SN interpretations]
\label{lem:sninterp}

\begin{tabular}{llllll}
1. & $\interp{A}^+ \subseteq \SN$ & \hspace{2cm} & 3. & $\interp{A}^- \subseteq \SN$\\
2. & $\textit{Vars}\subseteq \interp{A}^-$ & \hspace{2cm} & 4. & $\interp{A}^{+c} \subseteq \SN$
\end{tabular}
\end{lemma}
\begin{proof}
    For purposes of this proof and subsequent ones, define $\delta(t)$ to be
  the length of the longest reduction sequence from $t$ to a normal form, for
  $t\in\SN$.

  The proof of the lemma is by mutual well-founded induction on the
  pair $(A,n)$, where $n$ is the number of the proposition in the
  statement of the lemma; the well-founded ordering in question is the
  lexicographic combination of the structural ordering on types (for $A$) 
  and the ordering $1 > 2 > 4 > 3$ (for $n$).

  For proposition (1): assume $t\in\interp{A}^+$, and show $t\in\SN$.
  Let $x$ be a variable.  By IH(2), $x\in\interp{A}^-$, so by the
  definition of $\interp{A}^+$, we have
\[
  [[ nu x . t * x]] \in \SN
\]
  This implies $t\in\SN$.

  For proposition (2): assume $x\in\textit{Vars}$, and show
  $x\in\interp{A}^-$.  For the latter, it suffices to assume arbitrary
  $y\in\textit{Vars}$ and $t'\in\interp{A}^{+c}$, and show $[[nu y
  . t' * x]] \in \SN$.  We will prove this by inner induction on
  $\delta(t')$, which is defined by IH(4).  By the definition of
  $\interp{A}^{+c}$ for the various cases of $A$, we see that $[[nu y
  . t' * x]]$ cannot be a redex itself, as $t'$ cannot be a cut.  If
  $t'$ is a normal form we are done.  If $t\leadsto t''$, then we have
  $t''\in\interp{A}^{+c}$ by Lemma~\ref{lem:stepinterp}, and we may
  apply the inner induction hypothesis.

  For proposition (3): assume $t\in\interp{A}^-$, and show $t\in\SN$.
  By the definition of $\interp{A}^-$ and the fact that $\textit{Vars}\subseteq\interp{A}^{+c}$
  by definition of $\interp{A}^{+c}$, we have 
\[
  [[nu y . y * t]] \in \SN
\]
  This implies $t\in\SN$ as required.

  For proposition (4): assume $t\in\interp{A}^{+c}$, and consider the
  following cases.  If $t\in\textit{Vars}$ or $A\equiv[[< + >]]$, then
  $t$ is normal and the result is immediate.  So suppose $A \equiv
  [[A1 ->+ A2]]$.  Then $t\equiv \lambda x.t'$ for some $x$ and $t'$
  where for all $t''\in\interp{A_1}^+$, $[t''/x]t'\in\interp{A_2}^+$.
  By IH(2), the variable $x$ itself is in $\interp{A_1}^+$, so
  we know that $t'\equiv[x/x]t'\in\interp{A_2}^+$.  Then by IH(1)
  we have $t'\in\SN$, which implies $\lambda x.t'\in\SN$.  If $A\equiv [[A1 ->- A2]]$,
  then $t\equiv [[< t1 , t2>]]$ for some $t_1\in\interp{A_1}^-$ and
  $t_2\in\interp{A_2}^+$.  By IH(3) and IH(1), $t_1\in\SN$ and $t_2\in\SN$,
  which implies $[[< t1 , t2 >]]\in\SN$.  The cases for $A \equiv [[A1 /\p A2]]$
  are similar to this one.
\end{proof}  

\begin{definition}[Interpretation of contexts]
$\interp{\Gamma}$ is the set of substitutions $\sigma$ such that
for all $[[ x : p A]]\in\Gamma$, $\sigma(x)\in\interp{A}^p$.
\end{definition}

\begin{lemma}[Canonical positive is positive]
\label{lem:canonpos}
$\interp{A}^{+c}\subseteq\interp{A}^+$
\end{lemma}
\begin{proof}
Assume $t\in\interp{A}^{+c}$ and show $t\in\interp{A}^+$.
For the latter, assume arbitrary $x\in\textit{Vars}$ and $t'\in\interp{A}^-$,
and show $[[nu x . t * t']]\in\SN$.  This follows immediately
from the assumption that $t'\in\interp{A}^-$.
\end{proof}
Finally, we have everything we need to conclude strong normalization
of DTT.
\begin{thm}[Soundness]
\label{thm:sndinterp}
If $[[ J |-c t : p A]]$ then for all $\sigma\in\interp{\Gamma}$, $\sigma t\in\interp{A}^p$.
\end{thm}
\begin{proof}
The proof is by induction on the derivation of $[[ J |-c t : p A]]$.  We consider
the two possible polarities for the conclusion of the typing judgment separately.

\begin{itemize}
\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassAx}] {\ }{[[J , x : p A , J' |-c x : p A]]}
\end{math}
\end{center}

Since $\sigma\in\interp{[[J , x : p A, J']]}$, $\sigma(x)\in\interp{A}^p$ as required.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassUnit}] {\ }{[[J |-c triv : + < + >]]}
\end{math}
\end{center}

We have $[[triv]]\in\interp{[[<+>]]}^{+c}$ by definition.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassUnit}] {\ }{[[J |-c triv : - < - >]]}
\end{math}
\end{center}

To prove $[[triv]]\in\interp{[[<->]]}^{-}$, it suffices to assume
arbitrary $y\in\textit{Vars}$ and $t\in\interp{[[<->]]}^{+c}$, and
show $[[nu y . t * triv]]\in\SN$.  By definition of
$\interp{[[<->]]}^{+c}$, $t\in\textit{Vars}$, and then $[[nu y . t *
triv]]$ is in normal form.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassAnd}] {[[J |-c t1 : + A]] \qquad [[J |-c t2 : + B]]}{[[J |-c (t1,t2) : + A /\+ B]]}
\end{math}
\end{center}

By Lemma~\ref{lem:canonpos}, it suffices to show $(\sigma t_1,\sigma
t_2)\in\interp{[[A /\+ B]]}^{+c}$.  This follows directly from the
definition of $\interp{[[A /\+ B]]}^{+c}$, since the IH gives us
$\sigma t_1\in\interp{A}^+$ and $\sigma t_2\in\interp{B}^+$.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassAnd}] {[[J |-c t1 : - A1]] \qquad [[J |-c t2 : - A2]]}{[[J |-c (t1,t2) : - A1 /\- A2]]}
\end{math}
\end{center}

It suffices to assume arbitrary $y\in\textit{Vars}$ and
$t'\in\interp{[[A1 /\- A2]]}^{+c}$, and show $[[nu y . t' * (sigma t1
, sigma t2)]]\in\SN$.  If $t'\in\textit{Vars}$, then this follows by
Lemma~\ref{lem:sninterp} from the facts that $\sigma
t_1\in\interp{A_1}^+$ and $\sigma t_2\in\interp{A2}^+$, which we have
by the IH.  So suppose $t'$ is of the form $[[inj d t'']]$ for some
$d$ and some $t''\in\interp{A_d}^+$.  By the definition of $\SN$, it
suffices to show that all one-step successors $t_a$ of the term in
question are $\SN$.  The proof of this is by inner induction on
$\delta(t'') + \delta(\sigma t_1) + \delta(\sigma t_2)$, which exists
by Lemma~\ref{lem:sninterp}, using also Lemma~\ref{lem:stepinterp}.
Suppose that we step to $t_a$ by stepping $t''$, $\sigma t_1$, or
$\sigma t_2$.  Then the result holds by the inner IH.  So consider the
step
\[
[[nu y . inj d t'' * (sigma t1, sigma t2) ~> nu y . t'' * sigma h(t ! d)]]
\]
We then have $[[nu y . t'' * sigma h(t ! d)]]\in\SN$ from the facts
that $t''\in\interp{A_d}^+$ and $\sigma t_d\in\interp{A_d}^-$, by
the definition of $\interp{A_d}^+$.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassAndBar}] {[[J |-c t : + A ! d]]}{[[J |-c inj d t : + A1 /\- A2]]}
\end{math}
\end{center}
By Lemma~\ref{lem:canonpos}, it suffices to prove $[[inj d sigma
t]]\in\interp{[[ A1 /\- A2]]}^+$, but by the definition of $\interp{[[
  A1 /\- A2]]}^+$, this follows directly from $\sigma
t\in\interp{A_d}^+$, which we have by the IH.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassAndBar}] {[[J |-c t : - A ! d]]}{[[J |-c inj d t : - A1 /\+ A2]]}
\end{math}
\end{center}
To prove $[[inj d sigma t]]\in\interp{[[A1 /\+ A2]]}^-$, it suffices
to assume arbitrary $y\in\textit{Vars}$ and $t'\in\interp{[[A1 /\+
  A2]]}^{+c}$, and show $[[ nu y . t' * inj d sigma t]]\in\SN$.  If
$t'\in\textit{Vars}$, then this follows from the fact that $\sigma
t\in\SN$, which we have by Lemma~\ref{lem:sninterp} from $\sigma
t\in\interp{A_d}^-$ (which the IH gives us).  So suppose $t'$ is of
the form $(s_1,s_2)$ for some $s_1\in\interp{A_1}^+$ and
$s_2\in\interp{A_2}^+$.  It suffices to prove that all one-step
successors of the term in question are in $\SN$, as we did in a
previous case above.  Lemma~\ref{lem:sninterp} lets us proceed by
inner induction on $\delta(\sigma t) + \delta(s_1) + \delta(s_2)$,
using also Lemma~\ref{lem:stepinterp}.  If we step $\sigma t$, $s_1$
or $s_2$, then the result holds by inner IH.  Otherwise, we have the
step
\[
[[ nu y . (s1,s2) * inj d sigma t ~> nu y . s ! d * sigma t]]
\]
And this successor is in $\SN$ by the facts that $s_d\in\interp{A_d}^+$
and $\sigma t\in\interp{A_d}^-$, from the definition of $\interp{A_d}^+$.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassImp}] {[[J , x : + A |-c t : + B]]}{[[J |-c \ x . t : + A ->+ B]]}
\end{math}
\end{center}
By Lemma~\ref{lem:canonpos}, it suffices to assume arbitrary $y\in\textit{Vars}$ and $t'\in\interp{A}^+$,
and prove $[t'/x](\sigma t)\in\interp{B}^+$.  But this follows immediately from the IH, since
$[t'/x](\sigma t)\equiv (\sigma[x\mapsto t']) t$ and $\sigma[x\mapsto t]\in\interp{[[J , x : + A]]}$.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassImp}] {[[J , x : - A |-c t : - B]]}{[[J |-c \ x . t : - A ->- B]]}
\end{math}
\end{center}
It suffices to assume arbitrary $y\in\textit{Vars}$ and
$t'\in\interp{[[A ->- B]]}^{+c}$, and show $[[ nu y . t' * \ x . sigma
t]]\in\SN$.  Let us first observe that $[[sigma t]]\in\SN$, because by
the IH, for all $\sigma'\in\interp{[[J , x : - A]]}$, we have $\sigma'
t\in\interp{B}^-$, and $\interp{B}^-\subseteq\SN$ by
Lemma~\ref{lem:sninterp}.  We may instantiate this with
$\sigma[x\mapsto x]$, since by Lemma~\ref{lem:sninterp},
$x\in\interp{A}^-$.  Since $[[sigma t]]\in\SN$, we also have $[[\ x
. sigma t]]\in\SN$.  Now let us consider cases for the assumption
$t'\in\interp{[[A ->- B]]}^{+c}$.  If $t'\in\textit{Vars}$ then we
directly have $[[ nu y . t' * \ x . sigma t]]\in\SN$ from $[[\ x
. sigma t]]\in\SN$.  So assume $t'\equiv[[< t1 , t2>]]$ for some
$t_1\in\interp{A}^-$ and $t_2\in\interp{B}^+$.  By
Lemma~\ref{lem:sninterp} again, we may reason by inner induction on
$\delta(t_1)+\delta(t_2)+\delta(\sigma t)$ to show that all one-step
successors of $[[ nu y . < t1 , t2 > * \ x . sigma t]]$ are in $\SN$,
using also Lemma~\ref{lem:stepinterp}.  If $t_1$, $t_2$, or $\sigma t$
steps, then the result follows by the inner IH.  So suppose we have
the step
\[
[[ nu y . < t1 , t2 > * \ x . sigma t ~>  nu y . t2 * [t1 / x ] (sigma t) ]]
\]
Since $t_1\in\interp{A}^-$, the substitution $\sigma[x\mapsto t_1]$ is
in $\interp{[[J , x : - A]]}$.  So we may apply the IH to obtain $[t_1
/ x ] (\sigma t) \equiv \sigma[x\mapsto t_1]\in\interp{B}^-$.  Then
since $t_2\in\interp{B}^+$, we have $[[nu y . t2 * [t1 / x ] (sigma t)
]]$ by definition of $\interp{B}^+$.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassImpBar}] {[[J |-c t1 : - A]]  \qquad [[ J |-c t2 : + B ]]}{[[ J |-c < t1 , t2 > : + (A ->- B) ]]}
\end{math}
\end{center}
By Lemma~\ref{lem:canonpos}, as in previous cases of positive typing,
it suffices to prove $[[< sigma t1 , sigma t2>]]\in\interp{[[A ->-
  B]]}^{+c}$.  By the definition of $\interp{[[A ->- B]]}^{+c}$, this
follows directly from $\sigma t_1\in\interp{A}^-$ and $\sigma
t_2\in\interp{B}^+$, which we have by the IH.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassImpBar}] {[[J |-c t1 : + A]]  \qquad [[ J |-c t2 : - B ]]}{[[ J |-c < t1 , t2 > : - (A ->+ B) ]]}
\end{math}
\end{center}
It suffices to assume arbitrary $y\in\textit{Vars}$ and
$t'\in\interp{[[A ->+ B]]}^{+c}$, and show $[[nu y. t' * < sigma t1 ,
sigma t2 >]]\in\SN$.  By the IH, we have $\sigma t_1\in\interp{A}^+$
and $\sigma t_2\in\interp{B}^-$, and hence $\sigma t_1\in\SN$ and
$\sigma t_2\in\SN$ by Lemma~\ref{lem:sninterp}.  If
$t'\in\textit{Vars}$, then these facts are sufficient to show the term
in question is in $\SN$.  So suppose $t'\equiv \lambda x.t_3$, for
some $x\in\textit{Vars}$ and $t''$ such that for all
$t_4\in\interp{A}^+$, $[t_4/x]t_3\in\interp{B}^+$.  By similar
reasoning as in a previous case, we have $t_3\in\SN$.  So we may
proceed by inner induction on $\delta(t_1)+\delta(t_2)+\delta(t_3)$ to
show that all one-step successors of $[[nu y. \ x . t3 * < sigma t1 ,
sigma t2 >]]$ are in $\SN$, using also Lemma~\ref{lem:stepinterp}.  If
it is $t_3$, $\sigma t_1$, or $\sigma t_2$ which steps, then the
result follows by the inner IH.  So consider this step:
\[
[[nu y. \ x . t3 * < sigma t1 , sigma t2 >  ~>  nu y . [sigma t1 / x] t3 * sigma t2]]
\]
Since we have that $\sigma t_1\in\interp{A}^+$, the assumption about substitution
instances of $t_3$ gives us that $[\sigma t_1/x]t_3\in\interp{B}^+$, which is
then sufficient to conclude $[[nu y . [sigma t1 / x] t3 * sigma t2]]\in\SN$
by the definition of $\interp{B}^+$.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassCut}] {[[ J , x : - A  |-c t1 : + B ]]  \qquad [[  J , x : - A  |-c t2 : - B ]]}{[[  J |-c nu x . t1 * t2 : + A ]]}
\end{math}
\end{center}
It suffices to assume arbitrary $y\in\textit{Vars}$ and
$t'\in\interp{A}^-$, and show $[[nu y . (nu x . sigma t1 * sigma t2) *
t']]\in\SN$.  By the IH and part 2 of Lemma~\ref{lem:sninterp}, we
know that $\sigma t_1\in\interp{B}^+$ and $\sigma t_2\in\interp{B}^-$.
By Lemma~\ref{lem:sninterp} again, we have $t'\in\SN$, $\sigma
t_1\in\SN$, and $\sigma t_2\in\SN$.  So we may reason by induction on
$\delta(t')+\delta(\sigma t_1)+\delta(\sigma t_2)$ to show that all
one-step successors of $[[nu y . (nu x . sigma t1 * sigma t2) * t']]$
are in $\SN$, using also Lemma~\ref{lem:stepinterp}.  If it is $t'$,
$\sigma t_1$, or $\sigma t_2$ which steps, then the result follows by
the inner IH.  The only possible other reduction is by the
\dttdrulename{RBetaL} reduction rule (Figure~\ref{fig:dtt-red}).  And
then, since $t'\in\interp{A}^-$, we may apply the IH to conclude that
$[t'/x](\sigma t_1)\in\interp{B}^+$ and $[t'/x](\sigma t_2)\in\interp{B}^-$.
By the definition of $\in\interp{B}^+$, this suffices to prove
$[[nu y . [t'/x] sigma t1 * [t'/x]sigma t2]]\in\SN$, as required.

\item[Case.]\ 

\vspace{-.2cm}
\begin{center}
\begin{math}
\inferrule* [right=\ifrName{ClassCut}] {[[ J , x : - A  |-c t1 : + B ]]  \qquad [[  J , x : - A  |-c t2 : - B ]]}{[[  J |-c nu x . t1 * t2 : - A ]]}
\end{math}
\end{center}
It suffices to consider arbitrary $y\in\textit{Vars}$ and
$t'\in\interp{A}^{+c}$, and show $[[nu y. t' * (nu x . sigma t1 *
sigma t2)]]\in\SN$.  By the IH and part 2 of Lemma~\ref{lem:sninterp},
we have $\sigma t_1\in\interp{B}^+$ and $\sigma t_2\in\interp{B}^-$,
which implies $\sigma t_1\in\SN$ and $\sigma t_2\in\SN$ by
Lemma~\ref{lem:sninterp} again.  We proceed by inner induction on
$\delta(t')+\delta(\sigma t_1)+\delta(\sigma t_2)$, using
Lemma~\ref{lem:stepinterp}, to show that all one-step successors of
$[[nu y. t' * (nu x . sigma t1 * sigma t2)]]$ are in $\SN$.  If it is
$t'$, $\sigma t_1$, or $\sigma t_2$ which steps, then the result holds
by inner IH.  The only other reduction possible is by
\dttdrulename{RBetaR}, since $t'$ cannot be a cut term by the
definition of $\interp{A}^{+c}$.  In this case, the IH gives us
$[t'/x]\sigma t_1\in\interp{B}^+$ and $[t'/x]\sigma
t_2\in\interp{B}^-$, and we then have $[[nu y . [t'/x]sigma t1 *
[t'/x]sigma t2]]\in\SN$ by the definition of $\interp{B}^+$.
\end{itemize}

\end{proof}

\begin{corollary}[Strong Normalization]
  \label{thm:strong_normalization}
  If $[[Gr;H |- t : p A@n]]$, then $t \in \SN$.
\end{corollary}
\begin{proof} This follows easily by putting together Theorems~\ref{thm:inttoclass} and~\ref{thm:sndinterp}, with
Lemma~\ref{lem:sninterp}.
\end{proof}

\begin{corollary}[Cut Elimination]
If $[[Gr;H |- t : p A@n]]$, then there is normal $t'$ with
$t\leadsto^* t'$ and $t'$ containing only cut terms of the form
$[[nu x . y * t]]$ or $[[nu x . t * y]]$, for $y$ a variable.
\end{corollary}
Using the previous results we can see that the canonicity restrictions
placed on the reduction relation enforces confluence of the reduction
relation.
\begin{lemma}[Local Confluence]
\label{lem:localconf}
The reduction relation of Figure~\ref{fig:dtt-red} is locally confluent.
\end{lemma}
\begin{proof} We may view the reduction rules as higher-order pattern
  rewrite rules.  It is easy to confirm that all critical pairs (e.g.,
  between \dttdrulename{RBetaR} and the rules \dttdrulename{RImp},
  \dttdrulename{RImpBar}, \dttdrulename{RAnd1},
  \dttdrulename{RAndBar1}, \dttdrulename{RAnd2}, and
  \dttdrulename{RAndBar2}) are joinable.  Local confluence then
  follows by the higher-order critical pair lemma~\cite{nipkow91}.
\end{proof}

\begin{thm}[Confluence for Typable Terms]
The reduction relation restricted to terms typable in DTT is confluent.
\end{thm}
\begin{proof} Suppose $[[ Gr ; H |- t : p A @ n]]$ for some $[[Gr]]$, $[[H]]$, $[[p]]$, and $[[A]]$.
By Lemma~\ref{lemma:type_preservation}, any reductions in the unrestricted reduction
relation from $t$ are also in the reduction relation restricted to typable terms.
The result now follows from Newman's Lemma, using Lemma~\ref{lem:localconf} and
Theorem~\ref{thm:strong_normalization}.
\end{proof}
% section dualized_type_theory (end)

%%% Local Variables: 
%%% mode: latex
%%% reftex-default-bibliography: ("/Users/hde/thesis/paper/thesis.bib")
%%% TeX-master: "/Users/hde/thesis/paper/thesis.tex"
%%% End: 